<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Creating a Derived Theme - Hubzilla Docs</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../../css/version-select.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Hubzilla Docs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../../about/index.md" class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../start/" class="nav-link">Getting started</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../member/" class="nav-link">Member Guide</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../admin/" class="nav-link">Admin Gudie</a>
                            </li>
                            <li class="nav-item">
                                <a href="../" class="nav-link">Developers Guide</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../api/" class="nav-link">API</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a href="https://github.com/saiwal/hubzilla-docs/edit/master/docs/dev/themes/index.md" class="nav-link">Edit on saiwal/hubzilla-docs
                                    </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#creating-a-derived-theme" class="nav-link">Creating a Derived Theme</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#include-docmacrosmain_footerbb" class="nav-link">include doc/macros/main_footer.bb;</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="creating-a-derived-theme">Creating a Derived Theme</h1>
<p><strong>Lesson 1</strong></p>
<p>A derived theme takes most of the settings from its "parent" theme and lets you change a few things to your liking without creating an entire theme package. </p>
<p>To create a derived theme, first choose a name. For our example we'll call our theme 'mytheme'. Hopefully you'll be a bit more creative. But throughout this document, wherever you see 'mytheme', replace that with the name you chose.</p>
<p><strong>Directory Structure</strong></p>
<p>First you need to create a theme directory structure. We'll keep it simple. We need a php directory and a css directory. Here are the Unix/Linux commands to do this. Assume that 'mywebsite' is your top level $Projectname folder. </p>
<div class="language-text highlight"><pre><span></span><code>cd mywebsite
mkdir view/theme/mytheme
mkdir view/theme/mytheme/css
mkdir view/theme/mytheme/php
</code></pre></div>
<p>Great. Now we need a couple of files. The first one is your theme info file, which describes the theme.</p>
<p>It will be called view/theme/mytheme/php/theme.php (clever name huh?)</p>
<p>Inside it, put the following information - edit as needed</p>
<div class="language-text highlight"><pre><span></span><code>&lt;?php

/**
 *   * Name: Mytheme
 *   * Description: Sample Derived theme
 *   * Version: 1.0
 *   * Author: Your Name
 *   * Compat: Red [*]
 *
 */

function mytheme_init(&amp;$a) {

    App::$theme_info[&#39;extends&#39;] = &#39;redbasic&#39;;


}
</code></pre></div>
<p>Remember to rename the mytheme_init function with your theme name. In this case we will be extending the theme 'redbasic'. </p>
<p>Now create another file. We call this a PCSS file, but it's really a PHP file.</p>
<p>The file is called view/theme/mytheme/php/style.php</p>
<p>In it, put the following:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;?php

require_once(&#39;view/theme/redbasic/php/style.php&#39;);

echo @file_get_contents(&#39;view/theme/mytheme/css/style.css&#39;);
</code></pre></div>
<p>That's it. This tells the software to read the PCSS information for the redbasic theme first, and then read our CSS file which will just consist of changes we want to make from our parent theme (redbasic). </p>
<p>Now create the actual CSS file for your theme.  Put it in view/theme/mytheme/css/style.css (where we just told the software to look for it). For our example, we'll just change the body background color so you can see that it works. You can use any CSS you'd like. </p>
<div class="language-text highlight"><pre><span></span><code>body {
    background-color: #DDD;
}
</code></pre></div>
<p>You've just successfully created a derived theme. This needs to be enabled in the admin "themes" panel, and then anybody on the site can use it by selecting it in Settings-&gt;Display Settings as their default theme.  </p>
<p><strong>Lesson 2</strong></p>
<p>If you want to use the redbasic schemas for your derived theme, you have to do a bit more.</p>
<p>Do everything as above, but don't create view/theme/mytheme/php/style.php, but copy instead  view/theme/redbasic/php/style.php to view/theme/mytheme/php/style.php. Modify that file and remove (or comment out) these two lines:</p>
<div class="language-text highlight"><pre><span></span><code>if(local_channel() &amp;&amp; App::$channel &amp;&amp; App::$channel[&#39;channel_theme&#39;] != &#39;redbasic&#39;)
    set_pconfig(local_channel(), &#39;redbasic&#39;, &#39;schema&#39;, &#39;---&#39;);
</code></pre></div>
<p>Also add this line at the bottom:</p>
<div class="language-text highlight"><pre><span></span><code>echo @file_get_contents(&#39;view/theme/mytheme/css/style.css&#39;);
</code></pre></div>
<p>To show the schema selector you have to copy view/theme/redbasic/tpl/theme_settings.tpl to  view/theme/mytheme/tpl/theme_settings.tpl. Modify that file and replace the lines:</p>
<div class="language-text highlight"><pre><span></span><code>{{if $theme == redbasic}}
{{include file=&quot;field_select.tpl&quot; field=$schema}}
{{/if}}
</code></pre></div>
<p>with:</p>
<div class="language-text highlight"><pre><span></span><code>{{include file=&quot;field_select.tpl&quot; field=$schema}}
</code></pre></div>
<h1 id="include-docmacrosmain_footerbb">include doc/macros/main_footer.bb;</h1></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>
        <script src="../../js/version-select.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
