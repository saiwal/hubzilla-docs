{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"API/api_albums/","title":"API albums","text":"<p>Description: list photo albums</p> <p>GET /api/z/1.0/albums</p> <p>Output:</p> <pre><code>text - textual name\n\ntotal - number of photos in this album\n\nurl - web URL\n\nurlencode - textual name, urlencoded\n\nbin2hex - textual name using bin2hex (which is used in the web URL link)\n</code></pre> <p>Example:</p> <pre><code>{\n\n    \"success\": true,\n    \"albums\": [\n        {\n            \"text\": \"/\",\n            \"total\": \"2\",\n            \"url\": \"https://xyz.macgirvin.com/photos/hubzilla/album/\",\n            \"urlencode\": \"\",\n            \"bin2hex\": \"\"\n        },\n            {\n            \"text\": \"2016-01\",\n            \"total\": \"6\",\n            \"url\": \"https://xyz.macgirvin.com/photos/hubzilla/album/323031362d3031\",\n            \"urlencode\": \"2016-01\",\n            \"bin2hex\": \"323031362d3031\"\n        },\n        {\n            \"text\": \"2016-02\",\n            \"total\": \"7\",\n            \"url\": \"https://xyz.macgirvin.com/photos/hubzilla/album/323031362d3032\",\n            \"urlencode\": \"2016-02\",\n            \"bin2hex\": \"323031362d3032\"\n        },\n        {\n            \"text\": \"Cover Photos\",\n            \"total\": \"5\",\n            \"url\": \"https://xyz.macgirvin.com/photos/hubzilla/album/436f7665722050686f746f73\",\n            \"urlencode\": \"Cover+Photos\",\n            \"bin2hex\": \"436f7665722050686f746f73\"\n        },\n        {\n            \"text\": \"Profile Photos\",\n            \"total\": \"26\",\n            \"url\": \"https://xyz.macgirvin.com/photos/hubzilla/album/50726f66696c652050686f746f73\",\n            \"urlencode\": \"Profile+Photos\",\n            \"bin2hex\": \"50726f66696c652050686f746f73\"\n        }\n    ]\n\n}\n</code></pre>"},{"location":"API/api_filedata/","title":"API filedata","text":"<p>Provides the ability to download a file from cloud storage in chunks</p> <p>GET /api/z/1.0/filedata</p> <p>Required:</p> <pre><code>- file_id\n    attach.hash of desired file ('begins with' match)\n</code></pre> <p>Optional:</p> <pre><code>- start\n    starting byte of returned data in file (counting from 0)\n\n- length\n    length (prior to base64 encoding) of chunk to download\n</code></pre> <p>Returns:</p> <pre><code>attach (DB) structure with base64 encoded 'content' comprised of the desired chunk\n</code></pre> <p>Example:</p> <pre><code>https://xyz.macgirvin.com/api/z/1.0/filedata?f=&amp;file_id=9f5217770fd&amp;start=0&amp;length=48\n</code></pre> <p>Returns:</p> <pre><code>{\n\n    \"attach\": {\n        \"id\": \"107\",\n        \"aid\": \"1\",\n        \"uid\": \"2\",\n        \"hash\": \"9f5217770fd55d563bd77f84d534d8e119a187514bbd391714626cd9c0e60207\",\n        \"creator\": \"pgcJx1IQjuPkx8aI9qheJlBMZzJz-oTPjHy3h5pWlOVOriBO_cSiUhhqwhuZ74TYJ8_ECO3pPiRMWC0q8YPCQg\",\n        \"filename\": \"pcxtopbm.c\",\n        \"filetype\": \"application/octet-stream\",\n        \"filesize\": \"3934\",\n        \"revision\": \"0\",\n        \"folder\": \"\",\n        \"flags\": \"0\",\n        \"is_dir\": \"0\",\n        \"is_photo\": \"0\",\n        \"os_storage\": \"1\",\n        \"os_path\": \"\",\n        \"display_path\": \"\",\n        \"content\": \"LyogcGN4dG9wYm0uYyAtIGNvbnZlcnQgUEMgcGFpbnRicnVzaCAoLnBjeCkgZmls\",\n        \"created\": \"2016-07-24 23:13:01\",\n        \"edited\": \"2016-07-24 23:13:01\",\n        \"allow_cid\": \"\",\n        \"allow_gid\": \"\",\n        \"deny_cid\": \"\",\n        \"deny_gid\": \"\",\n        \"start\": 0,\n        \"length\": 48\n    }\n\n}\n</code></pre>"},{"location":"API/api_files/","title":"API files","text":"<p>List file storage (attach DB)</p> <p>GET /api/z/1.0/files</p> <p>Options:</p> <pre><code>- hash\n    return only entries matching hash (exactly)\n\n- filename\n    return only entries matching filename (substring)\n\n- filetype\n    return only entries matching filetype/mimetype (substring)\n\n- start\n    start at record (default 0)\n\n- records\n    number of records to return or 0 for unlimited\n</code></pre> <p>Example: </p> <p>curl -u mychannel:mypassword https://xyz.macgirvin.com/api/z/1.0/files -d filetype=multipart/mixed</p> <p>Returns:</p> <pre><code>{\n\n    \"success\": true,\n    \"results\": [\n        {\n            \"id\": \"1\",\n            \"aid\": \"1\",\n            \"uid\": \"2\",\n            \"hash\": \"44ee8b2a1a7f36dea07b93b7747a2383a1bc0fdd08339e8928bfcbe45f65d939\",\n            \"filename\": \"Profile Photos\",\n            \"filetype\": \"multipart/mixed\",\n            \"filesize\": \"0\",\n            \"revision\": \"0\",\n            \"folder\": \"\",\n            \"os_storage\": \"1\",\n            \"is_dir\": \"1\",\n            \"is_photo\": \"0\",\n            \"flags\": \"0\",\n            \"created\": \"2016-01-02 21:51:17\",\n            \"edited\": \"2016-01-02 21:51:17\",\n            \"allow_cid\": \"\",\n            \"allow_gid\": \"\",\n            \"deny_cid\": \"\",\n            \"deny_gid\": \"\"\n        },\n        {\n            \"id\": \"12\",\n            \"aid\": \"1\",\n            \"uid\": \"2\",\n            \"hash\": \"71883f1fc64af33889229cbc79c5a056deeec5fc277d765f182f19073e1b2998\",\n            \"filename\": \"Cover Photos\",\n            \"filetype\": \"multipart/mixed\",\n            \"filesize\": \"0\",\n            \"revision\": \"0\",\n            \"folder\": \"\",\n            \"os_storage\": \"1\",\n            \"is_dir\": \"1\",\n            \"is_photo\": \"0\",\n            \"flags\": \"0\",\n            \"created\": \"2016-01-15 00:24:33\",\n            \"edited\": \"2016-01-15 00:24:33\",\n            \"allow_cid\": \"\",\n            \"allow_gid\": \"\",\n            \"deny_cid\": \"\",\n            \"deny_gid\": \"\"\n        },\n        {\n            \"id\": \"16\",\n            \"aid\": \"1\",\n            \"uid\": \"2\",\n            \"hash\": \"f48f7ec3278499d1dd86b72c3207beaaf4717b07df5cc9b373f14d7aad2e1bcd\",\n            \"filename\": \"2016-01\",\n            \"filetype\": \"multipart/mixed\",\n            \"filesize\": \"0\",\n            \"revision\": \"0\",\n            \"folder\": \"\",\n            \"os_storage\": \"1\",\n            \"is_dir\": \"1\",\n            \"is_photo\": \"0\",\n            \"flags\": \"0\",\n            \"created\": \"2016-01-22 03:24:55\",\n            \"edited\": \"2016-01-22 03:26:57\",\n            \"allow_cid\": \"\",\n            \"allow_gid\": \"\",\n            \"deny_cid\": \"\",\n            \"deny_gid\": \"\"\n        }\n    ]\n}\n</code></pre>"},{"location":"API/api_group_members/","title":"API group_members","text":"<p>GET /api/z/1.0/group_members</p> <p>Required:</p> <pre><code>group_id or group_name\n</code></pre> <p>Returns:</p> <pre><code>group_member+abook+xchan (DB join) for each member of the privacy group\n\n\n[\n\n    {\n        \"id\": \"1\",\n        \"uid\": \"2\",\n        \"gid\": \"1\",\n        \"xchan\": \"pgcJx1IQjuPkx8aI9qheJlBMZzJz-oTPjHy3h5pWlOVOriBO_cSiUhhqwhuZ74TYJ8_ECO3pPiRMWC0q8YPCQg\",\n        \"abook_id\": \"2\",\n        \"abook_account\": \"1\",\n        \"abook_channel\": \"2\",\n        \"abook_xchan\": \"pgcJx1IQjuPkx8aI9qheJlBMZzJz-oTPjHy3h5pWlOVOriBO_cSiUhhqwhuZ74TYJ8_ECO3pPiRMWC0q8YPCQg\",\n        \"abook_my_perms\": \"218555\",\n        \"abook_their_perms\": \"0\",\n        \"abook_closeness\": \"0\",\n        \"abook_created\": \"2016-01-02 21:16:26\",\n        \"abook_updated\": \"2016-01-02 21:16:26\",\n        \"abook_connected\": \"0000-00-00 00:00:00\",\n        \"abook_dob\": \"0000-00-00 00:00:00\",\n        \"abook_flags\": \"0\",\n        \"abook_blocked\": \"0\",\n        \"abook_ignored\": \"0\",\n        \"abook_hidden\": \"0\",\n        \"abook_archived\": \"0\",\n        \"abook_pending\": \"0\",\n        \"abook_unconnected\": \"0\",\n        \"abook_self\": \"1\",\n        \"abook_feed\": \"0\",\n        \"abook_profile\": \"\",\n        \"abook_incl\": \"\",\n        \"abook_excl\": \"\",\n        \"abook_instance\": \"\",\n        \"xchan_hash\": \"pgcJx1IQjuPkx8aI9qheJlBMZzJz-oTPjHy3h5pWlOVOriBO_cSiUhhqwhuZ74TYJ8_ECO3pPiRMWC0q8YPCQg\",\n        \"xchan_guid\": \"lql-1VnxtiO4-WF0h72wLX1Fu8szzHDOXgQaTbELwXW77k8AKFfh-hYr70vqMrc3SSvWN-Flrc5HFhRTWB7ICw\",\n        \"xchan_guid_sig\": \"PafvEL0VpKfxATxlCqDjfOeSIMdmpr3iU7X-Sysa1h5LzDpjSXsjO37tYZL-accb1M5itLlfnW5epkTa5I4flsW21zSY1A2jCuBQUTLLGV7rNyyBy7lgqJUFvAMRx0TfXzP9lcaPqlM9T1tA6jfWOsOmkdzwofGeXBnsjGfjsO2xdGYe6vwjOU0DSavukvzDMnOayB9DekpvDnaNBTxeGLM45Skzr7ZEMcNF7TeXMbnvpfLaALYEKeQs9bGH-UgAG8fBWgzVAzeBfx_XSR1rdixjyiZGP0kq0h35SlmMPcEjliodOBFwMXqpXFB7Ibp4F6o6te2p2ErViJccQVG8VNKB6SbKNXY6bhP5zVcVsJ-vR-p4xXoYJJvzTN7yTDsGAXHOLF4ZrXbo5yi5gFAlIrTLAF2EdWQwxSGyLRWKxG8PrDkzEzX6cJJ0VRcLh5z6OI5QqQNdeghPZbshMFMJSc_ApCPi9_hI4ZfctCIOi3T6bdgTNKryLm5fhy_eqjwLAZTGP-aUBgLZpb1mf2UojBn6Ey9cCyq-0T2RWyk-FcIcbV4qJ-p_8oODqw13Qs5FYkjLr1bGBq82SuolkYrXEwQClxnrfKa4KYc2_eHAXPL01iS9zVnI1ySOCNJshB97Odpooc4wk7Nb2Fo-Q6THU9zuu0uK_-JbK7IIl6go2qA\",\n        \"xchan_pubkey\": \"-----BEGIN PUBLIC KEY-----\\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA18JB76lyP4zzL/y7BCej\\neJnfZIWZNtM3MZvI1zEVMWmmwOS+u/yH8oPwyaDk4Y/tnj8GzMPj1lCGVRcd8EJa\\nNrCMd50HODA5EsJtxpsOzRcILYjOcTtIAG1K4LtKqELi9ICAaFp0fNfa+Jf0eCek\\nvPusx2/ORhy+o23hFoSMhL86o2gmaiRnmnA3Vz4ZMG92ieJEDMXt9IA1EkIqS4y5\\nBPZfVPLD1pv8iivj+dtN1XjwplgjUbtxmU0/Ej808nHppscRIqx/XJ0XZU90oNGw\\n/wYoK2EzJlPbRsAkwNqoFrAYlr5HPpn4BJ2ebFYQgWBUraD7HwS5atsQEaxGfO21\\nlUP0+lDg9t3CXvudDj0UG1jiEKbVIGA+4aG0GN2DSC5AyRq/GRxqyay5W2vQbAZH\\nyvxPGrZFO24I65g3pjhpjEsLqZ4ilTLQoLMs0drCIcRm5RxMUo4s/LMg16lT4cEk\\n1qRtk2X0Sb1AMQQ2uRXiVtWz77QHMONEYkf6OW4SHbwcv5umvlv69NYEGfCcbgq0\\nAV7U4/BWztUz/SWj4r194CG43I9I8dmaEx9CFA/XMePIAXQUuABfe1QMOR6IxLpq\\nTHG1peZgHQKeGz4aSGrhQkZNNoOVNaZoIfcvopxcHDTZLigseEIaPPha4WFYoKPi\\nUPbZ5o8gTLc750uzrnb2jwcCAwEAAQ==\\n-----END PUBLIC KEY-----\\n\",\n        \"xchan_photo_mimetype\": \"image/png\",\n        \"xchan_photo_l\": \"https://xyz.macgirvin.com/photo/profile/l/2\",\n        \"xchan_photo_m\": \"https://xyz.macgirvin.com/photo/profile/m/2\",\n        \"xchan_photo_s\": \"https://xyz.macgirvin.com/photo/profile/s/2\",\n        \"xchan_addr\": \"teller@xyz.macgirvin.com\",\n        \"xchan_url\": \"https://xyz.macgirvin.com/channel/teller\",\n        \"xchan_connurl\": \"https://xyz.macgirvin.com/poco/teller\",\n        \"xchan_follow\": \"https://xyz.macgirvin.com/follow?f=&amp;url=%s\",\n        \"xchan_connpage\": \"\",\n        \"xchan_name\": \"Teller\",\n        \"xchan_network\": \"zot\",\n        \"xchan_instance_url\": \"\",\n        \"xchan_flags\": \"0\",\n        \"xchan_photo_date\": \"2016-10-19 01:26:50\",\n        \"xchan_name_date\": \"2016-01-02 21:16:26\",\n        \"xchan_hidden\": \"0\",\n        \"xchan_orphan\": \"0\",\n        \"xchan_censored\": \"0\",\n        \"xchan_selfcensored\": \"0\",\n        \"xchan_system\": \"0\",\n        \"xchan_pubforum\": \"0\",\n        \"xchan_deleted\": \"0\"\n    },\n    {\n        \"id\": \"12\",\n        \"uid\": \"2\",\n        \"gid\": \"1\",\n        \"xchan\": \"xuSMUYxw1djBB97qXsbrBN1nzJH_gFwQL6pS4zIy8fuusOfBxNlMiVb4h_q5tOEvpE7tYf1EsryjNciMuPIj5w\",\n        \"abook_id\": \"24\",\n        \"abook_account\": \"1\",\n        \"abook_channel\": \"2\",\n        \"abook_xchan\": \"xuSMUYxw1djBB97qXsbrBN1nzJH_gFwQL6pS4zIy8fuusOfBxNlMiVb4h_q5tOEvpE7tYf1EsryjNciMuPIj5w\",\n        \"abook_my_perms\": \"218555\",\n        \"abook_their_perms\": \"218555\",\n        \"abook_closeness\": \"80\",\n        \"abook_created\": \"2016-01-27 00:48:43\",\n        \"abook_updated\": \"2016-12-04 17:16:58\",\n        \"abook_connected\": \"2016-12-04 17:16:58\",\n        \"abook_dob\": \"0001-01-01 00:00:00\",\n        \"abook_flags\": \"0\",\n        \"abook_blocked\": \"0\",\n        \"abook_ignored\": \"0\",\n        \"abook_hidden\": \"0\",\n        \"abook_archived\": \"0\",\n        \"abook_pending\": \"0\",\n        \"abook_unconnected\": \"0\",\n        \"abook_self\": \"0\",\n        \"abook_feed\": \"0\",\n        \"abook_profile\": \"debb5236efb1626cfbad33ccb49892801e5f844aa04bf81f580cfa7d13204819\",\n        \"abook_incl\": \"\",\n        \"abook_excl\": \"\",\n        \"abook_instance\": \"\",\n        \"xchan_hash\": \"xuSMUYxw1djBB97qXsbrBN1nzJH_gFwQL6pS4zIy8fuusOfBxNlMiVb4h_q5tOEvpE7tYf1EsryjNciMuPIj5w\",\n        \"xchan_guid\": \"d5EMLlt1tHHZ0dANoA7B5Wq9UgXoWcFS9-gXOkL_AAejcPApoQRyxfHTuu8DoTbUaO-bYmX5HPuWuK9PHyqNmA\",\n        \"xchan_guid_sig\": \"CVWEMRPtzI1YcHfnnWHTuv3H964OAmSElgUfxMoX6RdQdxNpqb_POirpVuyP8s3W17mVCfO5V9IAjkg5iKcqCk6YcvOD_egmMy-AnM9TC1kKndQHw55CunD82Q8K_xBNSXkSROizcNkKh9DVLjJPFjW1AqtI4njkZ3EMgrWqnbFRM1qPToUoCY9zM3tEMHoAD9YX1zP90wl40LzfN-dtcNWpSBbiz9owou62uzLbN7mrCwKOMlXLjwwGswRnxIsEnb3O-FXOs8hs0mArKe9snq1-BKeD16LyzxgwlpVLElzIJZGEZGtMdIJgeRzKuBvPjsOIpQ1yAkuOpFJ3nGCM-IPOIIjAmyVl5zD3xPVcxxpZlJRn5fG1Y-gnqTgsrEQCA7M6XPWQdrdHU4akZfyUyFJDhv3uM-jon9VzrYTBw68R0WA-1Z8WafEHA4qh5OWAj85lUarwhr7iTiEckH51ypPCPs6VbT6Pw7yMaxfjFOcipashQagx0tfOlDhE5dQANOXKASFtH1J9-CZY2MQdLPQ6u54d5whuHKMGaJ0V68pnmZ2rOn7g344Ah2WCJrm17jj60QsRMorqRFj7GMdPIA1XB8Wrk88MuYOe3Dhyuu6ZWKI7YTWJS690ZVkKUqAiNHqj0W86DtaiPUc_mmGR0fHl4Gksnko3WmCFv9q2X2E\",\n        \"xchan_pubkey\": \"-----BEGIN PUBLIC KEY-----\\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAoj2xCJktBA8Ww7Hp+ZNL\\nrNuQpo8UB/bfvRkIy+yua3xpF1TuXcnAH61kyRz8vXgOu/l2CyxQbIoaGslCV5Sy\\n8JKeNXe+IilUdSSEjMIwCPfSPsYnMHsSnHWmPmclvJwEtQUKOZmW5mMuVBvXy7D2\\njomFwc69AYphdyys6eQ7Dcn6+FRBiQbyMprZ5lxyVW+O4DuXVNa3ej2ebx0gCJZ4\\ntTIlBoKwEey91dY+FyKVFjdwfNczpmL7LgmZXqcVx+MG3mYgibwdVMiXVj5X06cs\\nV9hJ5Xi+Aklsv/UWJtjw9FVt7y9TLptnhh4Ra6T/MDmnBBIAkOR7P/X8cRv078MT\\nl0IMsP0RJcDEtTLtwHFVtDs6p52KDFqclKWbqmxmxqV3OTPVYtArRGIzgnJi/5ur\\nHRr5G6Cif7QY3UowsIOf78Qvy28LwSbdymgBAWwPPKIviXWxGO+9kMWdmPSUQrWy\\nK0+7YA9P9fBUFfn9Hc+p8SJQmQ6OAqLwrDGiPSOlGaNrbEqwqLGgIpXwK+lEFcFJ\\n3SPOjJRWdR2whlMxvpwX+39+H7dWN3vSa3Al4/Sq7qW8yW2rYwf+eGyp4Z0lRR+8\\nJxFMCwZkSw5g14YdlikAPojv5V1c6KuA5ieg8G1hwyONV7A4JHPyEdPt0W0TZi6C\\nCOVkPaC3xGrguETZpJfVpwUCAwEAAQ==\\n-----END PUBLIC KEY-----\\n\",\n        \"xchan_photo_mimetype\": \"image/png\",\n        \"xchan_photo_l\": \"https://xyz.macgirvin.com/photo/9da63aa910ea14e1501ee1a749d181a6-4\",\n        \"xchan_photo_m\": \"https://xyz.macgirvin.com/photo/9da63aa910ea14e1501ee1a749d181a6-5\",\n        \"xchan_photo_s\": \"https://xyz.macgirvin.com/photo/9da63aa910ea14e1501ee1a749d181a6-6\",\n        \"xchan_addr\": \"cloner@xyz.macgirvin.com\",\n        \"xchan_url\": \"http://abc.macgirvin.com/channel/cloner\",\n        \"xchan_connurl\": \"http://abc.macgirvin.com/poco/cloner\",\n        \"xchan_follow\": \"https://xyz.macgirvin.com/follow?f=&amp;url=%s\",\n        \"xchan_connpage\": \"\",\n        \"xchan_name\": \"Karen\",\n        \"xchan_network\": \"zot\",\n        \"xchan_instance_url\": \"\",\n        \"xchan_flags\": \"0\",\n        \"xchan_photo_date\": \"2016-03-31 19:59:20\",\n        \"xchan_name_date\": \"2016-01-26 23:23:42\",\n        \"xchan_hidden\": \"0\",\n        \"xchan_orphan\": \"0\",\n        \"xchan_censored\": \"0\",\n        \"xchan_selfcensored\": \"0\",\n        \"xchan_system\": \"0\",\n        \"xchan_pubforum\": \"0\",\n        \"xchan_deleted\": \"0\"\n    }\n\n]\n</code></pre>"},{"location":"API/api_item_update/","title":"API item/update","text":"<p>Usage: POST /api/z/1.0/item/update</p> <p>Description: item/update posts an item (typically a conversation item or post, but can be any item) using form input.  </p> <p>Required:</p> <ul> <li> <p>body</p> <p>text/bbcode contents by default.</p> </li> </ul> <p>Optional:</p> <ul> <li> <p>$_FILES['media']</p> <p>uploaded media file to include with post</p> </li> <li> <p>title</p> <p>title of post/item</p> </li> <li> <p>contact_allow</p> <p>array of xchan.xchan_hash allowed to view this item</p> </li> <li> <p>group_allow</p> <p>array of group.hash allowed to view this item</p> </li> <li> <p>contact_deny</p> <p>array of xchan.xchan_hash not allowed to view this item</p> </li> <li> <p>group_deny</p> <p>array of group.hash not allowed to view this item</p> </li> <li> <p>coord</p> <p>geographic coordinates</p> </li> <li> <p>location</p> <p>freefrom location</p> </li> <li> <p>expire</p> <p>datetime this post will expire or be removed</p> </li> <li> <p>mimetype</p> <p>mimetype if not text/bbcode</p> </li> <li> <p>parent</p> <p>item.id of parent to this post (makes it a comment)</p> </li> <li> <p>parent_mid</p> <p>alternate form of parent using message_id</p> </li> <li> <p>remote_xchan</p> <p>xchan.xchan_hash of this message author if not the channel owner</p> </li> <li> <p>consensus</p> <p>boolean set to true if this is a consensus or voting item (default false)</p> </li> <li> <p>nocomment</p> <p>boolean set to true if comments are to be disabled (default false)</p> </li> <li> <p>origin</p> <p>do not use this without reading the code</p> </li> <li> <p>namespace</p> <p>persistent identity for a remote network or service</p> </li> <li> <p>remote_id</p> <p>message_id of this resource on a remote network or service</p> </li> <li> <p>message_id</p> <p>message_id of this item (leave unset to generate one)</p> </li> <li> <p>created</p> <p>datetime of message creation</p> </li> <li> <p>post_id</p> <p>existing item.id if this is an edit operation</p> </li> <li> <p>app</p> <p>application or network name to display with item</p> </li> <li> <p>categories</p> <p>comma separated categories for this item</p> </li> <li> <p>webpage</p> <p>item.page_type if not 0</p> </li> <li> <p>pagetitle</p> <p>for webpage and design elements, the 'page name'</p> </li> <li> <p>layout_mid</p> <p>item.mid of layout for this design element</p> </li> <li> <p>plink</p> <p>permalink for this item if different than the default</p> </li> <li> <p>verb</p> <p>activitystream verb for this item/activity</p> </li> <li> <p>obj_type</p> <p>activitystream object type for this item/activity</p> </li> </ul> <p>Example: </p> <p>curl -u mychannel:mypassword https://xyz.macgirvin.com/api/z/1.0/item/update -d body=\"hello world\"</p> <p>Returns:</p> <pre><code>{\n\n    \"success\": true,\n    \"item_id\": \"2245\",\n    \"item\": {\n        \"id\": \"2245\",\n        \"mid\": \"14135cdecf6b8e3891224e4391748722114da6668eebbcb56fe4667b60b88249@xyz.macgirvin.com\",\n        \"aid\": \"1\",\n        \"uid\": \"2\",\n        \"parent\": \"2245\",\n        \"parent_mid\": \"14135cdecf6b8e3891224e4391748722114da6668eebbcb56fe4667b60b88249@xyz.macgirvin.com\",\n        \"thr_parent\": \"14135cdecf6b8e3891224e4391748722114da6668eebbcb56fe4667b60b88249@xyz.macgirvin.com\",\n        \"created\": \"2016-12-03 20:00:12\",\n        \"edited\": \"2016-12-03 20:00:12\",\n        \"expires\": \"0001-01-01 00:00:00\",\n        \"commented\": \"2016-12-03 20:00:12\",\n        \"received\": \"2016-12-03 20:00:12\",\n        \"changed\": \"2016-12-03 20:00:12\",\n        \"comments_closed\": \"0001-01-01 00:00:00\",\n        \"owner_xchan\": \"pgcJx1IQjuPkx8aI9qheJlBMZzJz-oTPjHy3h5pWlOVOriBO_cSiUhhqwhuZ74TYJ8_ECO3pPiRMWC0q8YPCQg\",\n        \"author_xchan\": \"pgcJx1IQjuPkx8aI9qheJlBMZzJz-oTPjHy3h5pWlOVOriBO_cSiUhhqwhuZ74TYJ8_ECO3pPiRMWC0q8YPCQg\",\n        \"source_xchan\": \"\",\n        \"mimetype\": \"text/bbcode\",\n        \"title\": \"\",\n        \"body\": \"hello world\",\n        \"html\": \"\",\n        \"app\": \"\",\n        \"lang\": \"\",\n        \"revision\": \"0\",\n        \"verb\": \"http://activitystrea.ms/schema/1.0/post\",\n        \"obj_type\": \"http://activitystrea.ms/schema/1.0/note\",\n        \"obj\": \"\",\n        \"tgt_type\": \"\",\n        \"target\": \"\",\n        \"layout_mid\": \"\",\n        \"postopts\": \"\",\n        \"route\": \"\",\n        \"llink\": \"https://xyz.macgirvin.com/display/14135cdecf6b8e3891224e4391748722114da6668eebbcb56fe4667b60b88249@xyz.macgirvin.com\",\n        \"plink\": \"https://xyz.macgirvin.com/channel/mychannel/?f=&amp;mid=14135cdecf6b8e3891224e4391748722114da6668eebbcb56fe4667b60b88249@xyz.macgirvin.com\",\n        \"resource_id\": \"\",\n        \"resource_type\": \"\",\n        \"attach\": \"\",\n        \"sig\": \"sa4TOQNfHtV13HDZ1tuQGWNBpZp-nWhT2GMrZEmelXxa_IvEepD2SEsCTWOBqM8OKPJLfNy8_i-ORXjrOIIgAa_aT8cw5vka7Q0C8L9eEb_LegwQ_BtH0CXO5uT30e_8uowkwzh6kmlVg1ntD8QqrGgD5jTET_fMQOIw4gQUBh40GDG9RB4QnPp_MKsgemGrADnRk2vHO7-bR32yQ0JI-8G-eyeqGaaJmIwkHoi0vXsfjZtU7ijSLuKEBWboNjKEDU89-vQ1c5Kh1r0pmjiDk-a5JzZTYShpuhVA-vQgEcADA7wkf4lJZCYNwu3FRwHTvhSMdF0nmyv3aPFglQDky38-SAXZyQSvd7qlABHGCVVDmYrYaiq7Dh4rRENbAUf-UJFHPCVB7NRg34R8HIqmOKq1Su99bIWaoI2zuAQEVma9wLqMoFsluFhxX58KeVtlCZlro7tZ6z619-dthS_fwt0cL_2dZ3QwjG1P36Q4Y4KrCTpntn9ot5osh-HjVQ01h1I9yNCj6XPgYJ8Im3KT_G4hmMDFM7H9RUrYLl2o9XYyiS2nRrf4aJHa0UweBlAY4zcQG34bw2AMGCY53mwsSArf4Hs3rKu5GrGphuwYX0lHa7XEKMglwBWPWHI49q7-oNWr7aWwn1FnfaMfl4cQppCMtKESMNRKm_nb9Dsh5e0\",\n        \"diaspora_meta\": \"\",\n        \"location\": \"\",\n        \"coord\": \"\",\n        \"public_policy\": \"\",\n        \"comment_policy\": \"contacts\",\n        \"allow_cid\": \"\",\n        \"allow_gid\": \"\",\n        \"deny_cid\": \"\",\n        \"deny_gid\": \"\",\n        \"item_restrict\": \"0\",\n        \"item_flags\": \"0\",\n        \"item_private\": \"0\",\n        \"item_origin\": \"1\",\n        \"item_unseen\": \"0\",\n        \"item_starred\": \"0\",\n        \"item_uplink\": \"0\",\n        \"item_consensus\": \"0\",\n        \"item_wall\": \"1\",\n        \"item_thread_top\": \"1\",\n        \"item_notshown\": \"0\",\n        \"item_nsfw\": \"0\",\n        \"item_relay\": \"0\",\n        \"item_mentionsme\": \"0\",\n        \"item_nocomment\": \"0\",\n        \"item_obscured\": \"0\",\n        \"item_verified\": \"1\",\n        \"item_retained\": \"0\",\n        \"item_rss\": \"0\",\n        \"item_deleted\": \"0\",\n        \"item_type\": \"0\",\n        \"item_hidden\": \"0\",\n        \"item_unpublished\": \"0\",\n        \"item_delayed\": \"0\",\n        \"item_pending_remove\": \"0\",\n        \"item_blocked\": \"0\"\n    }\n\n}\n</code></pre>"},{"location":"API/api_xchan/","title":"API xchan","text":"<p>An xchan is a global location independent channel and is the primary record for a network  identity. It may refer to channels on other websites, networks, or services. </p> <p>GET /api/z/1.0/xchan</p> <p>Required: one of [ address, hash, guid ] as GET parameters</p> <p>Returns a portable xchan structure</p> <p>Example: https://xyz.macgirvin.com/api/z/1.0/xchan?f=&amp;address=mike@macgirvin.com</p> <p>Returns:</p> <pre><code>{\n    \"hash\": \"jr54M_y2l5NgHX5wBvP0KqWcAHuW23p1ld-6Vn63_pGTZklrI36LF8vUHMSKJMD8xzzkz7s2xxCx4-BOLNPaVA\",\n    \"guid\": \"sebQ-IC4rmFn9d9iu17m4BXO-kHuNutWo2ySjeV2SIW1LzksUkss12xVo3m3fykYxN5HMcc7gUZVYv26asx-Pg\",\n    \"guid_sig\": \"Llenlbl4zHo6-g4sa63MlQmTP5dRCrsPmXHHFmoCHG63BLq5CUZJRLS1vRrrr_MNxr7zob_Ykt_m5xPKe5H0_i4pDj-UdP8dPZqH2fqhhx00kuYL4YUMJ8gRr5eO17vsZQ3XxTcyKewtgeW0j7ytwMp6-hFVUx_Cq08MrXas429ZrjzaEwgTfxGnbgeQYQ0R5EXpHpEmoERnZx77VaEahftmdjAUx9R4YKAp13pGYadJOX5xnLfqofHQD8DyRHWeMJ4G1OfWPSOlXfRayrV_jhnFlZjMU7vOdQwHoCMoR5TFsRsHuzd-qepbvo3pzvQZRWnTNu6oPucgbf94p13QbalYRpBXKOxdTXJrGdESNhGvhtaZnpT9c1QVqC46jdfP0LOX2xrVdbvvG2JMWFv7XJUVjLSk_yjzY6or2VD4V6ztYcjpCi9d_WoNHruoxro_br1YO3KatySxJs-LQ7SOkQI60FpysfbphNyvYMkotwUFI59G08IGKTMu3-GPnV1wp7NOQD1yzJbGGEGSEEysmEP0SO9vnN45kp3MiqbffBGc1r4_YM4e7DPmqOGM94qksOcLOJk1HNESw2dQYWxWQTBXPfOJT6jW9_crGLMEOsZ3Jcss0XS9KzBUA2p_9osvvhUKuKXbNztqH0oZIWlg37FEVsDs_hUwUJpv2Ar09k4\",\n    \"pubkey\": \"-----BEGIN PUBLIC KEY-----\\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA7QCwvuEIwCHjhjbpz3Oc\\ntyei/Pz9nDksNbsc44Cm8jxYGMXsTPFXDZYCcCB5rcAhPPdZSlzaPkv4vPVcMIrw\\n5cdX0tvbwa3rNTng6uFE7qkt15D3YCTkwF0Y9FVZiZ2Ko+G23QeBt9wqb9dlDN1d\\nuPmu9BLYXIT/JXoBwf0vjIPFM9WBi5W/EHGaiuqw7lt0qI7zDGw77yO5yehKE4cu\\n7dt3SakrXphL70LGiZh2XGoLg9Gmpz98t+gvPAUEotAJxIUqnoiTA8jlxoiQjeRK\\nHlJkwMOGmRNPS33awPos0kcSxAywuBbh2X3aSqUMjcbE4cGJ++/13zoa6RUZRObC\\nZnaLYJxqYBh13/N8SfH7d005hecDxWnoYXeYuuMeT3a2hV0J84ztkJX5OoxIwk7S\\nWmvBq4+m66usn6LNL+p5IAcs93KbvOxxrjtQrzohBXc6+elfLVSQ1Rr9g5xbgpub\\npSc+hvzbB6p0tleDRzwAy9X16NI4DYiTj4nkmVjigNo9v2VPnAle5zSam86eiYLO\\nt2u9YRqysMLPKevNdj3CIvst+BaGGQONlQalRdIcq8Lin+BhuX+1TBgqyav4XD9K\\nd+JHMb1aBk/rFLI9/f2S3BJ1XqpbjXz7AbYlaCwKiJ836+HS8PmLKxwVOnpLMbfH\\nPYM8k83Lip4bEKIyAuf02qkCAwEAAQ==\\n-----END PUBLIC KEY-----\\n\",\n    \"photo_mimetype\": \"image/jpeg\",\n    \"photo_l\": \"https://xyz.macgirvin.com/photo/350b74555c04429148f2e12775f6c403-4\",\n    \"photo_m\": \"https://xyz.macgirvin.com/photo/350b74555c04429148f2e12775f6c403-5\",\n    \"photo_s\": \"https://xyz.macgirvin.com/photo/350b74555c04429148f2e12775f6c403-6\",\n    \"address\": \"mike@macgirvin.com\",\n    \"url\": \"https://macgirvin.com/channel/mike\",\n    \"connurl\": \"https://macgirvin.com/poco/mike\",\n    \"follow\": \"https://macgirvin.com/follow?f=&amp;url=%s\",\n    \"connpage\": \"https://macgirvin.com/connect/mike\",\n    \"name\": \"Mike Macgirvin\",\n    \"network\": \"zot\",\n    \"instance_url\": \"\",\n    \"flags\": \"0\",\n    \"photo_date\": \"2012-12-06 05:06:11\",\n    \"name_date\": \"2012-12-06 04:59:13\",\n    \"hidden\": \"1\",\n    \"orphan\": \"0\",\n    \"censored\": \"0\",\n    \"selfcensored\": \"0\",\n    \"system\": \"0\",\n    \"pubforum\": \"0\",\n    \"deleted\": \"0\"\n}\n</code></pre>"},{"location":"API/group/","title":"API group","text":"<p>GET /api/z/1.0/group</p> <p>Description: list privacy groups</p> <p>Returns: DB tables of all privacy groups. </p> <p>To use with API group_members, provide either 'group_id' from the id element returned in this call, or 'group_name' from the gname returned in this call.</p> <pre><code>[\n\n    {\n        \"id\": \"1\",\n        \"hash\": \"966c946394f3e2627bbb8a55026b5725e582407098415c02f85232de3f3fde76Friends\",\n        \"uid\": \"2\",\n        \"visible\": \"0\",\n        \"deleted\": \"0\",\n        \"gname\": \"Friends\"\n    },\n    {\n        \"id\": \"2\",\n        \"hash\": \"852ebc17f8c3ed4866f2162e384ded0f9b9d1048f93822c0c84196745f6eec66Family\",\n        \"uid\": \"2\",\n        \"visible\": \"1\",\n        \"deleted\": \"0\",\n        \"gname\": \"Family\"\n    },\n    {\n        \"id\": \"3\",\n        \"hash\": \"cc3cb5a7f9818effd7c7c80a58b09a189b62efa698a74319117babe33ee30ab9Co-workers\",\n        \"uid\": \"2\",\n        \"visible\": \"0\",\n        \"deleted\": \"0\",\n        \"gname\": \"Co-workers\"\n    }\n]\n</code></pre>"},{"location":"About/about/","title":"About","text":""},{"location":"About/about/#what-is-hubzilla","title":"What is Hubzilla?","text":""},{"location":"About/gdpr1/","title":"Gdpr1","text":"<p>Privacy Notice May 2018</p>"},{"location":"About/gdpr1/#how-your-information-will-be-used","title":"How your information will be used","text":"<p>Information you provide to this website may be stored and used to provide services to you.</p> <p>We require an email address to idenitfy the account holder. This will not be shared with any other website or service. It is used to send you notifications about your account and perform administrative tasks such as resetting your password. You have the option to  opt-out of all email notifications through your settings. </p> <p>Communication channels created on this website require a name and a photo or avatar. A default avatar will be chosen if you do not supply one. The name, avatar, and a link to  the channel webpage will be shared with other servers and services in order to refer to this identity. The name does not need to be your real name and the photo or avatar does not need to resemble you.</p> <p>All other information you supply to this website is optional. </p> <p>As a social communication and cloud storage service, you will usually be using this website to share information with others. We provide a range of privacy options to allow you to restrict this sharing to only those you choose. </p>"},{"location":"About/gdpr1/#processing-of-your-information","title":"Processing of your information","text":"<p>Our processing of your information is limited to storing it for you to use. We MAY keep logs of activity to help diagnose software issues and to maintain security of the system against intrusion. These logs are routinely deleted after a few days. </p> <p>We MAY (if you have provided this permission) try to suggest frendships or connections based on analysing publicly available information about your connections. This is currently the most advanced data \"processing\" performed at this website. You may restrict access to this information if this processing is undesired. </p> <p>If supplied, we MAY use your gender to formulate text messages in your native language, for instance \"Bob commented on HIS post.\"</p> <p>In all other cases, your data is stored under your desired privacy policy and to the best of our ability is only shared with those who you have elected to share it with.  </p> <p>We do not share your private information with third parties or analyse your behaviour or personal characteristics. We have no advertisements or business relationships with advertisers.  </p> <p>We MAY be asked or forced to divulge information provided by you in response to legitimate criminal and legal proceedings. Where possible we will notify you if this happens. </p>"},{"location":"About/gdpr1/#access-to-your-information","title":"Access to your information","text":"<p>Some communications are shared with other websites. Those using the same software will usually  have similar privacy policies. </p> <p>You may be shown embedded videos and provided links to visit other websites as part of your day-to-day activities using this website. This MAY expose you to monitoring by external services, such as (but not limited to) Facebook, Twitter, and Google. Each website operator is allowed to configure whether or not embedded content is permitted.</p> <p>Further access to your personal data and stored files is under your control.  </p> <p>Our storage of your data is provided under your implied consent through your continued use of the service. You may withdraw this consent at any time and on account deletion we will remove all data which belongs to you. The process of deletion may take several days as we also make a good faith effort to delete it from any internetworked websites that have been provided a copy. </p> <p>All data and files stored for a communications channel are available for you to download for either archival puposes or to transfer to another compatible website. </p>"},{"location":"About/gdpr1/#your-rights","title":"Your rights","text":"<p>Under the General Data Protection Regulation (GDPR) and The Data Protection Act 2018  (DPA) you have a number of rights with regard to your personal data.  You have the right to request from us access to and rectification or erasure of your personal data, the right to restrict processing, object to processing as well as in certain circumstances the right to data portability.</p> <p>If you have provided consent for the processing of your data you have the right (in certain  circumstances) to withdraw that consent at any time which will not affect the lawfulness of  the processing before your consent was withdrawn.</p> <p>You have the right to lodge a complaint to the Information Commissioners\u2019 Office if you  believe that we have not complied with the requirements of the GDPR or DPA 18 with regard  to your personal data.</p> <p>Identity and contact details of controller and data protection officer</p> <p>[NAME OF COMPANY] is the controller  [and processor] of data for the purposes of the DPA 18 and GDPR. 3</p> <p>If you have any concerns as to how your data is processed you can contact:</p> <p>[ [NAME] Data Protection Offer at  [EMAIL ADDRESS] ] [NAME] [JOB TITLE] at  [EMAIL ADDRESS] or you can write to these individuals using the address of  []</p>"},{"location":"Administrators%20Guide/Primary-Directory/","title":"Primary Directory","text":"<p>By default, $Projectname will use available Directories on the web, which show you channels available around the world.</p> <p>There are certain scenarios where you might want your own directory-server that you can connect multiple hubs to. This will limit the channels that appear in all of your hubs to only channels on hubs connected to your directory-server.</p>"},{"location":"Administrators%20Guide/Primary-Directory/#instuctions-on-how-to-set-up-one-hub-as-the-primary-directory-for-a-series-of-private-hubs","title":"Instuctions on how to set up one hub as the Primary Directory for a series of private hubs.","text":"<ul> <li> <p>On the hub that will be the Directory Server, open the .htconfig.php file and set:</p> <p><code>App::$config['system']['directory_mode'] = DIRECTORY_MODE_PRIMARY;</code></p> <p>By default it should already be set as DIRECTORY_MODE_NORMAL, so just edit that line to say DIRECTORY_MODE_PRIMARY</p> </li> <li> <p>Next, for each hub (including the Directory Server), from a terminal,  cd into the folder where it is installed and run this :</p> <p><code>util/config system directory_realm YOURREALMNAME</code></p> <p>(YOURREALMNAME can be whatever you want your realm-name to be)</p> <p>then:</p> <p><code>util/config system realm_token THEPASSWORD</code></p> <p>(THEPASSWORD is whatever password you want for your realm)</p> <p>NOTE: Use the same realm-name and password for each hub</p> </li> <li> <p>Lastly, for each \"client\" hub, (from a terminal) run:</p> <p><code>util/config system directory_server https://theaddressofyourdirectoryserver.com</code></p> </li> </ul> <p>Now when you view the directory of each hub, it should only show the channels that exist on the hubs in your realm. I have tested with two hubs so far, and it seems to be working fine. Channels created in each hub are reflected in the Primary Directory, and subsequently in the directory of all client hubs</p>"},{"location":"Administrators%20Guide/Primary-Directory/#issues","title":"Issues","text":"<p>When I created the first hub,it was up and running for an hour or so before I changed it to PRIMARY_MODE, and after changing it, there were a few channels from across the matrix still present in the directory. I deleted them from the xchan table and that seems to have fixed the issue. </p>"},{"location":"Administrators%20Guide/Widgets/","title":"Core Widgets","text":"<p>Some/many of these widgets have restrictions which may restrict the type of page where they may appear or may require login</p> <ul> <li> <p>clock - displays the current time</p> <ul> <li>args: military (1 or 0) - use 24 hour time as opposed to AM/PM  </li> </ul> </li> <li> <p>profile - displays a profile sidebar on pages which load profiles (pages with nickname in the URL)</p> </li> <li> <p>tagcloud - display a tagcloud of webpage items</p> <ul> <li>args: count - number of items to return (default 24)  </li> </ul> </li> <li> <p>collections - privacy group selector for the current logged in channel</p> <ul> <li>args: mode - one of \"conversation\", \"group\", \"abook\" depending on module  </li> </ul> </li> <li> <p>suggestions - friend suggestions for the current logged on channel</p> </li> <li> <p>follow - presents a text box for following another channel</p> </li> <li> <p>notes - private notes area for the current logged in channel if private_notes feature is enabled</p> </li> <li> <p>savedsearch - network/matrix search with save - must be logged in and savedsearch feature enabled</p> </li> <li> <p>filer - select filed items from network/matrix stream - must be logged in</p> </li> <li> <p>archive - date range selector for network and channel pages</p> <ul> <li>args: 'wall' - 1 or 0, limit to wall posts or network/matrix posts (default)  </li> </ul> </li> <li> <p>fullprofile - same as profile currently</p> </li> <li> <p>categories - categories filter (channel page)</p> </li> <li> <p>tagcloud_wall - tagcloud for channel page only</p> <ul> <li>args: 'limit' - number of tags to return (default 50)  </li> </ul> </li> <li> <p>catcloud_wall - tagcloud for channel page categories</p> <ul> <li>args: 'limit' - number of categories to return (default 50)  </li> </ul> </li> <li> <p>affinity - affinity slider for network page - must be logged in</p> </li> <li> <p>settings_menu - sidebar menu for settings page, must be logged in</p> </li> <li> <p>mailmenu - sidebar menu for private message page - must be logged in</p> </li> <li> <p>design_tools - design tools menu for webpage building pages, must be logged in</p> </li> <li> <p>findpeople - tools to find other channels</p> </li> <li> <p>photo_albums - list photo albums of the current page owner with a selector menu</p> </li> <li> <p>vcard - mini profile sidebar for the person of interest (page owner, whatever)</p> </li> <li> <p>dirsafemode - directory selection tool - only on directory pages</p> </li> <li> <p>dirsort - directory selection tool - only on directory pages</p> </li> <li> <p>dirtags - directory tool - only on directory pages</p> </li> <li> <p>menu_preview - preview a menu - only on menu edit pages</p> </li> <li> <p>chatroom_list - list of chatrooms for the page owner</p> </li> <li> <p>bookmarkedchats - list of bookmarked chatrooms collected on this site for the current observer</p> </li> <li> <p>suggestedchats - \"interesting\" chatrooms chosen for the current observer</p> </li> <li> <p>item - displays a single webpage item by mid or page title</p> <ul> <li>args:</li> <li>channel_id - channel that owns the content, defualt is the profile_uid </li> <li>mid - message_id of webpage to display (must be webpage, not a conversation item)</li> <li>title - URL page title of webpage (must provide one of either title or mid)  </li> </ul> </li> <li> <p>photo - display a single photo</p> <ul> <li>args: </li> <li>src - URL of photo, must be http or https</li> <li>zrl - use zid authenticated link</li> <li>style - CSS style string  </li> </ul> </li> <li> <p>cover_photo - display the cover photo for the selected channel</p> <ul> <li>args:</li> <li>channel_id - channel to use, default is the profile_uid </li> <li>style - CSS style string (default is dynamically resized to width of region)  </li> </ul> </li> <li> <p>photo_rand - display a random photo from one of your photo albums. Photo permissions are honoured</p> <ul> <li>args: </li> <li>album - album name (very strongly recommended if you have lots of photos)</li> <li>scale - typically 0 (original size), 1 (1024px), 2, (640px), or 3 (320px)</li> <li>style - CSS style string</li> <li>channel_id - if not your own  </li> </ul> </li> <li> <p>random_block - display a random block element from your webpage design tools collection. Permissions are honoured.</p> <ul> <li>args: </li> <li>contains - only return blocks which include the contains string in the block name</li> <li>channel_id - if not your own  </li> </ul> </li> <li> <p>tasklist - provide a task or to-do list for the currently logged-in channel.</p> <ul> <li>args:</li> <li>all - display completed tasks if all is non-zero.  </li> </ul> </li> <li> <p>forums - provide a list of connected public forums with unseen counts for the current logged-in channel.  </p> </li> <li> <p>activity - provide a list of authors of unread network content for the current logged-in channel.</p> </li> <li> <p>album - provides a widget containing a complete photo album from albums belonging to the page owner; this may be too large to present in a sidebar region as is best implemented as a content region widget. </p> <ul> <li>args:</li> <li>album - album name</li> <li>title - optional title, album name is used if not present  </li> </ul> </li> </ul>"},{"location":"Administrators%20Guide/Widgets/#creating-new-widgets","title":"Creating New Widgets","text":""},{"location":"Administrators%20Guide/Widgets/#class-widgets","title":"Class Widgets","text":"<p>To create a class-based widget named 'slugfish' create a file with the following contents:</p> <pre><code>&lt;?php\n\nnamespace Zotlabs\\Widget;\n\n\nclass Slugfish {\n\n    function widget($args) {\n\n    ... widget code goes here.\n    ... The function returns a string which is the HTML content of the widget.\n    ... $args is a named array which is passed any [var] variables from the layout editor\n    ... For instance [widget=slugfish][var=count]3[/var][/widget] will populate $args with\n    ... [ 'count' =&gt; 3 ]\n\n    }\n\n</code></pre> <p>The resultant file may be placed in widget/Slugfish/Slugfish.php , or Zotlabs/SiteWidgets/Slugfish.php . It also may be linked from a git repository using util/add_widget_repo.</p> <p>Traditional function based widget:</p> <p>If you want a widget named 'slugfish', create widget/widget_slugfish.php containing</p> <pre><code>&lt;?php\n\nfunction widget_slugfish($args) {\n\n.. widget code goes here. See above information for class-based widgets for details.\n\n}\n</code></pre>"},{"location":"Administrators%20Guide/Widgets/#include-docmacrosmain_footerbb","title":"include doc/macros/main_footer.bb;","text":""},{"location":"Administrators%20Guide/administrator_guide/","title":"Administrator guide","text":""},{"location":"Administrators%20Guide/administrator_guide/#overview","title":"Overview","text":"<p>$Projectname is more than a simple web application. It is a complex communications system which more closely resembles an email server than a web server. For reliability and performance, messages are delivered in the background and are queued for later delivery when sites are down. This kind of functionality requires a bit more of the host system than the typical blog. Not every PHP/MySQL hosting provider will be able to support $Projectname. Many will but please review the requirements and confirm these with your hosting provider prior to installation.</p> <p>We've tried very hard to ensure that $Projectname will run on commodity hosting platforms such as those used to host Wordpress blogs and Drupal websites. It will run on most any Linux VPS system. Windows LAMP platforms such as XAMPP and WAMP are not officially supported at this time however we welcome patches if you manage to get it working.</p>"},{"location":"Administrators%20Guide/administrator_guide/#where-to-find-more-help","title":"Where to find more help","text":"<p>If you encounter problems or have issues not addressed in this documentation, please let us know via the Github issue tracker. Please be as clear as you can about your operating environment and provide as much detail as possible about any error messages you may see, so that we can prevent it from happening in the future. Due to the large variety of operating systems and PHP platforms in existence we may have only limited ability to debug your PHP installation or acquire any missing modules, but we will do our best to solve any general code issues.</p>"},{"location":"Administrators%20Guide/administrator_guide/#before-you-begin","title":"Before you begin","text":""},{"location":"Administrators%20Guide/administrator_guide/#choose-a-domain-name-or-subdomain-name-for-your-server","title":"Choose a domain name or subdomain name for your server","text":"<p>$Projectname can only be installed into the root of a domain or sub-domain, and can not be installed using alternate TCP ports.</p>"},{"location":"Administrators%20Guide/administrator_guide/#decide-if-you-will-use-ssl-and-obtain-an-ssl-certificate-before-software-installation","title":"Decide if you will use SSL and obtain an SSL certificate before software installation","text":"<p>You SHOULD use SSL. If you use SSL, you MUST use a \"browser-valid\" certificate. You MUST NOT use self-signed certificates!</p> <p>Please test your certificate prior to installation. A web tool for testing your certificate is available at \"http://www.digicert.com/help/\". When visiting your site for the first time, please use the SSL (\"https://\") URL if SSL is available. This will avoid problems later. The installation routine will not allow you to use a non browser-valid certificate.</p> <p>This restriction is incorporated because public posts from you may contain references to images on your own hub. Other members viewing their stream on other hubs will get warnings if your certificate is not trusted by their web browser. This will confuse many people because this is a decentralised network and they will get the warning about your hub while viewing their own hub and may think their own hub has an issue. These warnings are very technical and scary to some folks, many of whom will not know how to proceed except to follow the browser advice. This is disruptive to the community. That said, we recognise the issues surrounding the current certificate infrastructure and agree there are many problems, but that doesn't change the requirement.</p> <p>Free \"browser-valid\" certificates are available from providers such as StartSSL and LetsEncrypt.</p> <p>If you do NOT use SSL, there may be a delay of up to a minute for the initial install script - while we check the SSL port to see if anything responds there. When communicating with new sites, $Projectname always attempts connection on the SSL port first, before falling back to a less secure connection.  If you do not use SSL, your webserver MUST NOT listen on port 443 at all.</p> <p>If you use LetsEncrypt to provide certificates and create a file under .well-known/acme-challenge so that LetsEncrypt can verify your domain ownership, please remove or rename the .well-known directory as soon as the certificate is generated. $Projectname will provide its own handler for \".well-known\" services when it is installed, and an existing directory in this location may prevent some of these services from working correctly. This should not be a problem with Apache, but may be an issue with nginx or other web server platforms.</p>"},{"location":"Administrators%20Guide/administrator_guide/#deployment","title":"Deployment","text":"<p>There are several ways to deploy a new hub.</p> <ul> <li>Manual installation on an existing server</li> <li>Automated installation on an existing server using a shell script</li> <li>Automated deployment using an OpenShift virtual private server (VPS)</li> </ul>"},{"location":"Administrators%20Guide/administrator_guide/#requirements","title":"Requirements","text":"<ul> <li> <p>Apache with mod-rewrite enabled and \"AllowOverride All\" so you can use a   local .htaccess file. Some folks have successfully used nginx and lighttpd.   Example config scripts are available for these platforms in doc/install.   Apache and nginx have the most support.</p> </li> <li> <p>PHP 8.1 or later.   Note that on some shared hosting environments, the command line   version of PHP might differ from the webserver version</p> </li> <li> <p>PHP command line access with register_argc_argv set to true in the   php.ini file, and with no hosting provider restrictions on the use of   exec() and proc_open().</p> </li> <li> <p>curl, gd (with at least jpeg and png support), pdo-mysql (or pdo-postgres), mbstring, zip,   and openssl extensions. The imagick extension is not required, but recommended.</p> </li> <li> <p>xml extension is required if you want webdav to work.</p> </li> <li> <p>some form of email server or email gateway such that PHP mail() works.</p> </li> <li> <p>A supported database server. The supported databases are:</p> </li> <li>Mysql version 8.0.22 or later</li> <li>MariaDB version 10.4 or later</li> <li> <p>PostgreSQL version 12 or later</p> </li> <li> <p>ability to schedule jobs with cron.</p> </li> <li> <p>Installation into a top-level domain or sub-domain (without a   directory/path component in the URL) is REQUIRED.</p> </li> </ul>"},{"location":"Administrators%20Guide/administrator_guide/#manual-installation","title":"Manual Installation","text":""},{"location":"Administrators%20Guide/administrator_guide/#unpack-the-projectname-files-into-the-root-of-your-web-server-document-area","title":"Unpack the $Projectname files into the root of your web server document area","text":"<p>If you copy the directory tree to your webserver, make sure that you include the hidden files like .htaccess.</p> <p>If you are able to do so, we recommend using git to clone the source repository rather than to use a packaged tar or zip file.  This makes the software much easier to update. The Linux command to clone the repository into a directory \"mywebsite\" would be:</p> <pre><code>git clone https://framagit.org/hubzilla/core.git mywebsite\n</code></pre> <p>and then you can pick up the latest changes at any time with:</p> <pre><code>git pull\n</code></pre> <p>make sure folders <code>store/[data]/smarty3</code> and <code>store</code> exist and are writable by the webserver:</p> <pre><code>mkdir -p \"store/[data]/smarty3\"\nchmod -R 777 store\n\nThis permission (777) is very dangerous and if you have sufficient\nprivilege and knowledge you should make these directories writeable\nonly by the webserver and, if different, the user that will run the\ncron job (see below). In many shared hosting environments this may be\ndifficult without opening a trouble ticket with your provider. The\nabove permissions will allow the software to work, but are not\noptimal.\n</code></pre> <p>The following directories also need to be writable by the webserver in order for certain web-based administrative tools to function:</p> <ul> <li><code>addon</code></li> <li><code>extend</code></li> <li><code>view/theme</code></li> <li><code>widget</code></li> </ul>"},{"location":"Administrators%20Guide/administrator_guide/#official-addons","title":"Official addons","text":""},{"location":"Administrators%20Guide/administrator_guide/#installation","title":"Installation","text":"<p>Navigate to your website. Then you should clone the addon repository (separately). We'll give this repository a nickname of 'hzaddons'. You can pull in other hubzilla addon repositories by giving them different nicknames:</p> <pre><code>cd mywebsite\nutil/add_addon_repo https://framagit.org/hubzilla/addons.git hzaddons\n</code></pre>"},{"location":"Administrators%20Guide/administrator_guide/#updating","title":"Updating","text":"<p>For keeping the addon tree updated, you should be on your top level website directory and issue an update command for that repository::</p> <pre><code>cd mywebsite\nutil/update_addon_repo hzaddons\n</code></pre> <p>Create searchable representations of the online documentation. You may do this any time that the documentation is updated :</p> <pre><code>cd mywebsite\nutil/importdoc\n</code></pre>"},{"location":"Administrators%20Guide/administrator_guide/#automated-installation-via-the-homeinstall-shell-script","title":"Automated installation via the .homeinstall shell script","text":"<p>There is a shell script in (<code>.homeinstall/hubzilla-setup.sh</code>) that will install $Projectname and its dependencies on a fresh installation of Debian 9 stable (Stetch). It should work on similar Linux systems but your results may vary.</p>"},{"location":"Administrators%20Guide/administrator_guide/#requirements_1","title":"Requirements","text":"<p>The installation script was originally designed for a small hardware server behind your home router. However, it has been tested on several systems running Debian 9:</p> <ul> <li> <p>Home-PC (Debian-9.2-amd64) and Rapberry-Pi 3 (Rasbian = Debian 9.3)</p> </li> <li> <p>Internet connection and router at home</p> </li> <li>Mini-PC / Raspi connected to your router</li> <li>USB drive for backups</li> <li>Fresh installation of Debian on your mini-pc</li> <li>Router with open ports 80 and 443 for your Debian</li> </ul>"},{"location":"Administrators%20Guide/administrator_guide/#overview-of-installation-steps","title":"Overview of installation steps","text":"<ol> <li><code>apt-get install git</code></li> <li><code>mkdir -p /var/www/html</code></li> <li><code>cd /var/www/html</code></li> <li><code>git clone https://framagit.org/hubzilla/core.git .</code></li> <li><code>nano .homeinstall/hubzilla-config.txt</code></li> <li><code>cd .homeinstall/</code></li> <li><code>./hubzilla-setup.sh</code></li> <li><code>service apache2 reload</code></li> <li>Open your domain with a browser and step throught the initial configuration of $Projectname.</li> </ol>"},{"location":"Administrators%20Guide/administrator_guide/#recommended-addons","title":"Recommended Addons","text":"<p>We recommend the following addons be installed on all public sites:</p> <pre><code>nsfw - hide inappropriate posts/comments\nsuperblock - block content from offensive channels\n</code></pre>"},{"location":"Administrators%20Guide/administrator_guide/#federation-addons","title":"Federation Addons","text":"<p>Several web communities have begun to converge using common protocols. The protocols involved are somewhat limited in their abilities. The GNU-Social protocol for instance offers no privacy modes, and the Diaspora protocol is somewhat restrictive in what kinds of communications are allowed. All comments must be signed in a very unique manner by the original author. The ActivityPub protocol is also being considered and may be supported at a future date. No other existing protocol supports nomadic location as used by this project. This presents some support challenges as some features work with some networks and don't work with others. Nevertheless the federation protocols allow connections to be made to a much larger community of people worldwide. They are provided as addons.</p> <ul> <li> <p>diaspora - The Diaspora Protocol used by Diaspora and Friendica. You should enable 'Diaspora Statistics' (statistics) first to enable all the available features.</p> </li> <li> <p>gnusoc - The GNU-Social Protocol, used by GNU-Social, Mastodon and several other communities. This addon requires you first install the 'pubsubhubbub' service (also an addon).</p> </li> </ul> <p>Each member of your site must choose whether or not to allow these protocols individually as they may conflict with several desirable core features and abilities of this software (such as channel migration and cloning). They do this from their 'Settings -&gt; Feature/Addon Settings' page. The administrator may also set the following:</p> <pre><code>util/config system.diaspora_allowed 1\nutil/config system.gnusoc_allowed 1\n</code></pre> <p>and enable these protocols automatically for all newly created channels.</p>"},{"location":"Administrators%20Guide/administrator_guide/#service-classes","title":"Service Classes","text":"<p>Service classes allow you to set limits on system resources by limiting what individual accounts can do, including file storage and top-level post limits. Define custom service classes according to your needs in the <code>.htconfig.php</code> file. For example, create a standard and premium class using the following lines:</p> <pre><code>// Service classes\n\nApp::$config['system']['default_service_class']='standard'; // this is the default service class that is attached to every new account\n\n// configuration for standard service class\nApp::$config['service_class']['standard'] =\narray('photo_upload_limit'=&gt;2097152, // total photo storage limit per channel (here 2MB)\n'total_identities' =&gt;1, // number of channels an account can create\n'total_items' =&gt;0, // number of top level posts a channel can create. Applies only to top level posts of the channel user, other posts and comments are unaffected\n'total_pages' =&gt;100, // number of pages a channel can create\n'total_channels' =&gt;100, // number of channels the user can add, other users can still add this channel, even if the limit is reached\n'attach_upload_limit' =&gt;2097152, // total attachment storage limit per channel (here 2MB)\n'chatters_inroom' =&gt;20);\n\n// configuration for premium service class\nApp::$config['service_class']['premium'] =\narray('photo_upload_limit'=&gt;20000000000, // total photo storage limit per channel (here 20GB)\n'total_identities' =&gt;20, // number of channels an account can create\n'total_items' =&gt;20000, // number of top level posts a channel can create. Applies only to top level posts of the channel user, other posts and comments are unaffected\n'total_pages' =&gt;400, // number of pages a channel can create\n'total_channels' =&gt;2000, // number of channels the user can add, other users can still add this channel, even if the limit is reached\n'attach_upload_limit' =&gt;20000000000, // total attachment storage limit per channel (here 20GB)\n'chatters_inroom' =&gt;100);\n</code></pre> <p>To apply a service class to an existing account, use the command line utility from the web root:</p> <p><code>util/service_class</code> list service classes</p> <p><code>util/config system default_service_class firstclass</code> set the default service class to 'firstclass'</p> <p><code>util/service_class firstclass</code> list the services that are part of 'firstclass' service class</p> <p><code>util/service_class firstclass photo_upload_limit 10000000</code> set firstclass total photo disk usage to 10 million bytes</p> <p><code>util/service_class --account=5 firstclass</code> set account id 5 to service class 'firstclass' (with confirmation)</p> <p><code>util/service_class --channel=blogchan firstclass</code> set the account that owns channel 'blogchan' to service class 'firstclass' (with confirmation)</p> <p>Service class limit options</p> <ul> <li>photo_upload_limit - maximum total bytes for photos</li> <li>total_items - maximum total toplevel posts</li> <li>total_pages - maximum comanche pages</li> <li>total_identities - maximum number of channels owned by account</li> <li>total_channels - maximum number of connections</li> <li>total_feeds - maximum number of rss feed connections</li> <li>attach_upload_limit - maximum file upload storage (bytes)</li> <li>minimum_feedcheck_minutes - lowest setting allowed for polling rss feeds</li> <li>chatrooms - maximum chatrooms</li> <li>chatters_inroom - maximum chatters per room</li> <li>access_tokens - maximum number of Guest Access Tokens per channel</li> </ul>"},{"location":"Administrators%20Guide/administrator_guide/#theme-management","title":"Theme management","text":""},{"location":"Administrators%20Guide/administrator_guide/#repo-management-example","title":"Repo management example","text":"<ol> <li>Navigate to your hub web root</li> </ol> <p><code>root@hub:/root# cd /var/www</code> 2. Add the theme repo and give it a name</p> <p><code>root@hub:/var/www# util/add_theme_repo https://github.com/DeadSuperHero/redmatrix-themes.git DeadSuperHero</code> 3. Update the repo by using</p> <p><code>root@hub:/var/www#  util/update_theme_repo DeadSuperHero</code></p>"},{"location":"Administrators%20Guide/administrator_guide/#channel-directory","title":"Channel Directory","text":""},{"location":"Administrators%20Guide/administrator_guide/#keywords","title":"Keywords","text":"<p>There is a \"tag cloud\" of keywords that can appear on the channel directory page. If you wish to hide these keywords, which are drawn from the directory server, you can use the config tool:</p> <pre><code>util/config system disable_directory_keywords 1\n</code></pre> <p>If your hub is in the standalone mode because you do not wish to connect to the global grid, you may instead ensure the the directory_server system option is empty:</p> <pre><code>util/config system directory_server \"\"\n</code></pre>"},{"location":"Administrators%20Guide/administrator_guide/#administration","title":"Administration","text":""},{"location":"Administrators%20Guide/administrator_guide/#site-administration","title":"Site Administration","text":"<p>Administration of the website is commonly done through the admin webpage located at /admin on your website. In order to access this page you must have administration rights to the server. Administration rights are granted to the first account to register on your site, provided the email address of that account exactly matches the email address you provided as the administrator's email address during setup.</p> <p>There are several ways that this can fail and leave the system without an administrator account, for instance if the first account that was created provided a different email address than the administrator email address that was supplied during setup.</p> <p>For security reasons there is no web page or interface on the system which will give you administrator access. If you need to correct a situation where a system has no administrator account it must be done by editing the account table in the database. There is no other way. To do this, you will need to locate the entry in the account table which belongs to the desired administrator, and set 'account_roles' for that entry to 4096. You will then be able to access the admin page from your system's profile menu or directly via /admin .</p> <p>A hub can have multiple admins and there is no limit to how administrators you can have. Repeat the above process for every account you wish to provide with administration rights.</p>"},{"location":"Administrators%20Guide/administrator_guide/#troubleshooting","title":"Troubleshooting","text":""},{"location":"Administrators%20Guide/administrator_guide/#log-files","title":"Log files","text":"<p>The system logfile is an extremely useful resource for tracking down things that go wrong. This can be enabled in the admin/log configuration page. A loglevel setting of <code>LOGGER_DEBUG</code> is preferred for stable production sites. Most things that go wrong with communications or storage are listed here. A setting of LOGGER_DATA provides much more detail, but may fill your disk. In either case we recommend the use of logrotate on your operating system to cycle logs and discard older entries.</p> <p>At the bottom of your .htconfig.php file are several lines (commented out) which enable PHP error logging. This reports issues with code syntax and executing the code and is the first place you should look for issues which result in a \"white screen\" or blank page. This is typically the result of code/syntax problems.  Database errors are reported to the system logfile, but we've found it useful to have a file in your top-level directory called dbfail.out which only collects database related issues. If the file exists and is writable, database errors will be logged to it as well as to the system logfile.</p> <p>In the case of \"500\" errors, the issues may often be logged in your webserver logs, often /var/log/apache2/error.log or something similar. Consult your operating system documentation.</p> <p>There are three different log facilities.</p> <p>The first is the database failure log. This is only used if you   create a file called specifically <code>dbfail.out</code> in the root folder of   your website and make it write-able by the web server. If we have   any database failed queries, they are all reported here. They   generally indicate typos in our queries, but also occur if the   database server disconnects or tables get corrupted. On rare   occasions we'll see race conditions in here where two processes   tried to create an xchan or cache entry with the same ID. Any other   errors (especially persistent errors) should be investigated.</p> <p>The second is the PHP error log. This is created by the language   processor and only reports issues in the language environment. Again   these can be syntax errors or programming errors, but these   generally are fatal and result in a \"white screen of death\";   e.g. PHP terminates. You should probably look at this file if   something goes wrong that doesn't result in a white screen of death,   but it isn't uncommon for this file to be empty for days on end.</p> <p>There are some lines at the bottom of the supplied <code>.htconfig.php</code>   file; which if uncommented will enable a PHP error log (extremely   useful for finding the source of white screen failures). This isn't   done by default due to potential issues with logfile ownership and   write permissions and the fact that there is no logfile rotation by   default.</p> <p>The third is the \"application log\". This is used by $Projectname   to report what is going on in the program and usually reports any   difficulties or unexpected data we received. It also occasionally   reports \"heartbeat\" status messages to indicate that we reached a   certain point in a script. This is the most important log file   to us, as we create it ourself for the sole purpose of reporting the   status of background tasks and anything that seems weird or out of   place. It may not be fatal, but maybe just unexpected. If you're   performing a task and there's a problem, let us know what is in this   file when the problem occurred. (Please don't send me 100M dumps   you'll only piss me off). Just a few relevant lines so I can rule   out a few hundred thousand lines of code and concentrate on where   the problem starts showing up.</p> <p>These are your site logs, not mine. We report serious issues at any log level. I highly recommend <code>DEBUG</code> log level for most sites - which provides a bit of additional info and doesn't create huge logfiles. When there's a problem which defies all attempts to track, you might wish to use <code>DATA</code> log level for a short period of time to capture all the detail of what structures we were dealing with at the time. This log level will use a lot of space so is recommended only for brief periods or for developer test sites.</p> <p>I recommend configuring logrotate for both the php log and the application log. I usually have a look at dbfail.out every week or two, fix any issues reported and then starting over with a fresh file. Likewise with the PHP logfile. I refer to it once in a while to see if there's something that needs fixing.</p> <p>If something goes wrong, and it's not a fatal error, I look at the application logfile. Often I will</p> <pre><code>tail -f logfile.out\n</code></pre> <p>While repeating an operation that has problems. Often I'll insert extra logging statements in the code if there isn't any hint what's going wrong. Even something as simple as \"got here\" or printing out the value of a variable that might be suspect. You can do this too - in fact I encourage you to do so. Once you've found what you need to find, you can</p> <pre><code>git checkout file.php\n</code></pre> <p>To immediately clear out all the extra logging stuff you added.  Use the information from this log and any detail you can provide from your investigation of the problem to file your bug report - unless your analysis points to the source of the problem. In that case, just fix it.</p>"},{"location":"Administrators%20Guide/administrator_guide/#rotating-log-files","title":"Rotating log files","text":"<ol> <li>Enable the logrot addon in the official hubzilla-addons repo</li> <li>Create a directory in your web root called <code>log</code> with webserver write permissions</li> <li>Go to the logrot admin settings and enter this folder name as well as the max size and number of retained log files.</li> </ol>"},{"location":"Administrators%20Guide/administrator_guide/#reporting-issues","title":"Reporting issues","text":"<p>When reporting issues, please try to provide as much detail as may be necessary for developers to reproduce the issue and provide the complete text of all error messages.</p> <p>We encourage you to try to the best of your abilities to use these logs combined with the source code in your possession to troubleshoot issues and find their cause. The community is often able to help, but only you have access to your site logfiles and it is considered a security risk to share them.</p> <p>If a code issue has been uncovered, please report it on the project bugtracker (https://framagit.org/hubzilla/core/issues). Again provide as much detail as possible to avoid us going back and forth asking questions about your configuration or how to duplicate the problem, so that we can get right to the problem and figure out what to do about it. You are also welcome to offer your own solutions and submit patches. In fact we encourage this as we are all volunteers and have little spare time available. The more people that help, the easier the workload for everybody. It's OK if your solution isn't perfect. Every little bit helps and perhaps we can improve on it.</p>"},{"location":"Administrators%20Guide/hub_snapshots/","title":"Hub snapshots","text":""},{"location":"Administrators%20Guide/hub_snapshots/#hub-snapshot-tools","title":"Hub Snapshot Tools","text":"<p>Hubzilla developers frequently need to switch between branches that might have  incompatible database schemas or content. The following two scripts create and  restore complete snapshots of a Hubzilla instance, including both the hub web  root and the entire database state. Each script requires a config file called  <code>hub-snapshot.conf</code> residing in the same folder and containing the specific  directories and database details of your hub.</p>"},{"location":"Administrators%20Guide/hub_snapshots/#config","title":"Config","text":"<p>The format of the config file is very strict. There must be no spaces between the  variable name and the value. Replace only the content inside the quotes with your  configuration. Save this file as <code>hub-snapshot.conf</code> alongside the scripts.</p> <pre><code># Location of hub root. Typically this is the location of the Hubzilla repo clone.\nHUBROOT=\"/var/www/\"\n# MySQL database name\nDBNAME=\"hubzilla\"\n# MySQL database user\nDBUSER=\"hubzilla\"\n# MySQL database password\nDBPWD=\"akeufajeuwfb\"\n# The target snapshot folder where the git repo will be initialized\nSNAPSHOTROOT=\"/root/snapshots/hubzilla/\"\n</code></pre>"},{"location":"Administrators%20Guide/hub_snapshots/#snapshot","title":"Snapshot","text":"<p>Example usage:</p> <pre><code>sh hub-snapshot.sh my-hub.conf \"Commit message for the snapshot\"\n</code></pre> <p>hub-snapshot.sh:</p> <pre><code>#!/bin/bash\n\nif ! [ -f \"$1\" ]; then\n    echo \"$1 is not a valid file. Aborting...\"\n    exit 1\nfi\nsource \"$1\"\n#echo \"$DBNAME\"\n#echo \"$DBUSER\"\n#echo \"$DBPWD\"\n#echo \"$HUBROOT\"\n#echo \"$SNAPSHOTROOT\"\nMESSAGE=\"snapshot: $2\"\n\nif [ \"$DBPWD\" == \"\" -o \"$SNAPSHOTROOT\" == \"\" -o \"$DBNAME\" == \"\" -o \"$DBUSER\" == \"\" -o \"$HUBROOT\" == \"\" ]; then\n    echo \"Required variable is not set. Aborting...\"\n    exit 1\nfi\n\nif [ ! -d \"$SNAPSHOTROOT\"/db/ ]; then\n    mkdir -p \"$SNAPSHOTROOT\"/db/\nfi\nif [ ! -d \"$SNAPSHOTROOT\"/www/ ]; then\n    mkdir -p \"$SNAPSHOTROOT\"/www/\nfi\n\nif [ ! -d \"$SNAPSHOTROOT\"/www/ ] || [ ! -d \"$SNAPSHOTROOT\"/db/ ]; then\n    echo \"Error creating snapshot directories. Aborting...\"\n    exit 1\nfi\n\necho \"Export database...\"\nmysqldump -u \"$DBUSER\" -p\"$DBPWD\" \"$DBNAME\" &gt; \"$SNAPSHOTROOT\"/db/\"$DBNAME\".sql\necho \"Copy hub root files...\"\nrsync -va --delete --exclude=.git* \"$HUBROOT\"/ \"$SNAPSHOTROOT\"/www/\n\ncd \"$SNAPSHOTROOT\"\n\nif [ ! -d \".git\" ]; then\n    git init\nfi\nif [ ! -d \".git\" ]; then\n    echo \"Cannot initialize git repo. Aborting...\"\n    exit 1\nfi\n\ngit add -A\necho \"Commit hub snapshot...\"\ngit commit -a -m \"$MESSAGE\"\n\nexit 0\n</code></pre>"},{"location":"Administrators%20Guide/hub_snapshots/#restore","title":"Restore","text":"<pre><code>#!/bin/bash\n# Restore hub to a previous state. Input hub config and commit hash\n\nif ! [ -f \"$1\" ]; then\n        echo \"$1 is not a valid file. Aborting...\"\n        exit 1\nfi\nsource \"$1\"\nCOMMIT=$2\n\nif [ \"$DBPWD\" == \"\" -o \"$SNAPSHOTROOT\" == \"\" -o \"$DBNAME\" == \"\" -o \"$DBUSER\" == \"\" -o \"$HUBROOT\" == \"\" ]; then\n        echo \"Required variable is not set. Aborting...\"\n        exit 1\nfi\nRESTOREDIR=\"$(mktemp -d)/\"\n\nif [ ! -d \"$RESTOREDIR\" ]; then\n    echo \"Cannot create restore directory. Aborting...\"\n    exit 1\nfi\necho \"Cloning the snapshot repo...\"\ngit clone \"$SNAPSHOTROOT\" \"$RESTOREDIR\"\ncd \"$RESTOREDIR\"\necho \"Checkout requested snapshot...\"\ngit checkout \"$COMMIT\"\necho \"Restore hub root files...\"\nrsync -a --delete --exclude=.git* \"$RESTOREDIR\"/www/ \"$HUBROOT\"/\necho \"Restore hub database...\"\nmysql -u \"$DBUSER\" -p\"$DBPWD\" \"$DBNAME\" &lt; \"$RESTOREDIR\"/db/\"$DBNAME\".sql\n\nchown -R www-data:www-data \"$HUBROOT\"/{store,extend,addon,.htlog,.htconfig.php}\n\necho \"Restored hub to snapshot $COMMIT\"\necho \"Removing temporary files...\"\n\nrm -rf \"$RESTOREDIR\"\n\nexit 0\n</code></pre>"},{"location":"Developers%20Guide/DerivedTheme1/","title":"Creating a Derived Theme","text":"<p>Lesson 1</p> <p>A derived theme takes most of the settings from its \"parent\" theme and lets you change a few things to your liking without creating an entire theme package. </p> <p>To create a derived theme, first choose a name. For our example we'll call our theme 'mytheme'. Hopefully you'll be a bit more creative. But throughout this document, wherever you see 'mytheme', replace that with the name you chose.</p> <p>Directory Structure</p> <p>First you need to create a theme directory structure. We'll keep it simple. We need a php directory and a css directory. Here are the Unix/Linux commands to do this. Assume that 'mywebsite' is your top level $Projectname folder. </p> <pre><code>cd mywebsite\nmkdir view/theme/mytheme\nmkdir view/theme/mytheme/css\nmkdir view/theme/mytheme/php\n</code></pre> <p>Great. Now we need a couple of files. The first one is your theme info file, which describes the theme.</p> <p>It will be called view/theme/mytheme/php/theme.php (clever name huh?)</p> <p>Inside it, put the following information - edit as needed</p> <pre><code>&lt;?php\n\n/**\n *   * Name: Mytheme\n *   * Description: Sample Derived theme\n *   * Version: 1.0\n *   * Author: Your Name\n *   * Compat: Red [*]\n *\n */\n\nfunction mytheme_init(&amp;$a) {\n\n    App::$theme_info['extends'] = 'redbasic';\n\n\n}\n</code></pre> <p>Remember to rename the mytheme_init function with your theme name. In this case we will be extending the theme 'redbasic'. </p> <p>Now create another file. We call this a PCSS file, but it's really a PHP file.</p> <p>The file is called view/theme/mytheme/php/style.php</p> <p>In it, put the following:</p> <pre><code>&lt;?php\n\nrequire_once('view/theme/redbasic/php/style.php');\n\necho @file_get_contents('view/theme/mytheme/css/style.css');\n</code></pre> <p>That's it. This tells the software to read the PCSS information for the redbasic theme first, and then read our CSS file which will just consist of changes we want to make from our parent theme (redbasic). </p> <p>Now create the actual CSS file for your theme.  Put it in view/theme/mytheme/css/style.css (where we just told the software to look for it). For our example, we'll just change the body background color so you can see that it works. You can use any CSS you'd like. </p> <pre><code>body {\n    background-color: #DDD;\n}\n</code></pre> <p>You've just successfully created a derived theme. This needs to be enabled in the admin \"themes\" panel, and then anybody on the site can use it by selecting it in Settings-&gt;Display Settings as their default theme.  </p> <p>Lesson 2</p> <p>If you want to use the redbasic schemas for your derived theme, you have to do a bit more.</p> <p>Do everything as above, but don't create view/theme/mytheme/php/style.php, but copy instead  view/theme/redbasic/php/style.php to view/theme/mytheme/php/style.php. Modify that file and remove (or comment out) these two lines:</p> <pre><code>if(local_channel() &amp;&amp; App::$channel &amp;&amp; App::$channel['channel_theme'] != 'redbasic')\n    set_pconfig(local_channel(), 'redbasic', 'schema', '---');\n</code></pre> <p>Also add this line at the bottom:</p> <pre><code>echo @file_get_contents('view/theme/mytheme/css/style.css');\n</code></pre> <p>To show the schema selector you have to copy view/theme/redbasic/tpl/theme_settings.tpl to  view/theme/mytheme/tpl/theme_settings.tpl. Modify that file and replace the lines:</p> <pre><code>{{if $theme == redbasic}}\n{{include file=\"field_select.tpl\" field=$schema}}\n{{/if}}\n</code></pre> <p>with:</p> <pre><code>{{include file=\"field_select.tpl\" field=$schema}}\n</code></pre>"},{"location":"Developers%20Guide/DerivedTheme1/#include-docmacrosmain_footerbb","title":"include doc/macros/main_footer.bb;","text":""},{"location":"Developers%20Guide/Developers/","title":"Developer Guide","text":"<p>Here is how you can join us.</p> <p>First, get yourself a working git package on the system where you will be doing development.</p> <p>Create your own github account.</p> <p>You may fork/clone the $Projectname repository from https://framagit.org/hubzilla/core.git.</p> <p>Follow the instructions provided here: http://help.github.com/fork-a-repo/ to create and use your own tracking fork on framagit</p> <p>Then go to your framagit page and create a \"Pull request\" when you are ready to notify us to merge your work.</p> <p>Translations</p> <p>Our translations are managed through Transifex. If you wish to help out translating $Projectname to another language, sign up on transifex.com, visit https://www.transifex.com/projects/p/hubzilla/ and request to join one of the existing language teams or create a new one. Notify one of the core developers when you have a translation update which requires merging, or ask about merging it yourself if you're comfortable with git and PHP. We have a string file called 'messages.po' which is gettext compliant and a handful of email templates, and from there we automatically generate the application's language files.   </p> <p>Translations - More Info</p> <p>Important</p> <p>Please pull in any changes from the project repository and merge them with your work before issuing a pull request. We reserve the right to reject any patch which results in a large number of merge conflicts. This is especially true in the case of language translations - where we may not be able to understand the subtle differences between conflicting versions.</p> <p>Also - test your changes. Don't assume that a simple fix won't break something else. If possible get an experienced Red developer to review the code. </p> <p>Licensing</p> <p>All code contributed to the project falls under the MIT license, unless otherwise specified. We will accept third-party code which falls under MIT, BSD and LGPL, but copyleft licensing (GPL, and AGPL) is only permitted in addons. It must be possible to completely remove the GPL (copyleft) code from the main project without breaking anything.</p> <p>Coding Style </p> <p>In the interests of consistency we adopt the following code styling. We may accept patches using other styles, but where possible please try to provide a consistent code style. We aren't going to argue or debate the merits of this style, and it is irrelevant what project 'xyz' uses. This is not project 'xyz'. This is a baseline to try and keep the code readable now and in the future. </p> <ul> <li> <p>All comments should be in English.</p> </li> <li> <p>We use doxygen to generate documentation. This hasn't been consistently applied, but learning it and using it are highly encouraged.</p> </li> <li> <p>Indentation is accomplished primarily with tabs using a tab-width of 4.</p> </li> <li> <p>String concatenation and operators should be separated by whitespace. e.g. \"$foo = $bar . 'abc';\" instead of \"$foo=$bar.'abc';\"</p> </li> <li> <p>Generally speaking, we use single quotes for string variables and double quotes for SQL statements. \"Here documents\" should be avoided. Sometimes using double quoted strings with variable replacement is the most efficient means of creating the string. In most cases, you should be using single quotes.</p> </li> <li> <p>Use whitespace liberally to enhance readability. When creating arrays with many elements, we will often set one key/value pair per line, indented from the parent line appropriately. Lining up the assignment operators takes a bit more work, but also increases readability.</p> </li> <li> <p>Generally speaking, opening braces go on the same line as the thing which opens the brace. They are the last character on the line. Closing braces are on a line by themselves. </p> </li> </ul>"},{"location":"Developers%20Guide/Developers/#include-docmacrosmain_footerbb","title":"include doc/macros/main_footer.bb;","text":""},{"location":"Developers%20Guide/Plugins/","title":"Creating Plugins/Addons for $Projectname","text":"<p>So you want to make $Projectname do something it doesn't already do. There are lots of ways. But let's learn how to write a plugin or addon. </p> <p>In your $Projectname folder/directory, you will probably see a sub-directory called 'addon'. If you don't have one already, go ahead and create it. </p> <pre><code>mkdir addon\n</code></pre> <p>Then figure out a name for your addon. You probably have at least a vague idea of what you want it to do. For our example I'm going to create a plugin called 'randplace' that provides a somewhat random location for each of your posts. The name of your plugin is used to find the functions we need to access and is part of the function names, so to be safe, use only simple text characters.</p> <p>Once you've chosen a name, create a directory beneath 'addon' to hold your working file or files.</p> <pre><code>mkdir addon/randplace\n</code></pre> <p>Now create your plugin file. It needs to have the same name, and it's a PHP script, so using your favourite editor, create the file</p> <pre><code>addon/randplace/randplace.php\n</code></pre> <p>The very first line of this file needs to be</p> <pre><code>&lt;?php\n</code></pre> <p>Then we're going to create a comment block to describe the plugin. There's a special format for this. We use / ... / comment-style and some tagged lines consisting of</p> <pre><code>/**\n *\n * Name: Random Place (here you can use better descriptions than you could in the filename)\n * Description: Sample $Projectname plugin, Sets a random place when posting.\n * Version: 1.0\n * Author: Mike Macgirvin &lt;mike@zothub.com&gt;\n *\n */\n</code></pre> <p>These tags will be seen by the site administrator when he/she installs or manages plugins from the admin panel. There can be more than one author. Just add another line starting with 'Author:'.</p> <p>The typical plugin will have at least the following functions:</p> <ul> <li>pluginname_load()</li> <li>pluginname_unload()</li> </ul> <p>In our case, we'll call them randplace_load() and randplace_unload(), as that is the name of our plugin. These functions are called whenever we wish to either initialise the plugin or remove it from the current webpage. Also if your plugin requires things like altering the database schema before it can run for the very first time, you would likely place these instructions in the functions named</p> <ul> <li>pluginname_install()</li> <li>pluginname_uninstall()</li> </ul> <p>Next we'll talk about hooks. Hooks are places in $Projectname code where we allow plugins to do stuff. There are a lot of these, and they each have a name. What we normally do is use the pluginname_load() function to register a \"handler function\" for any hooks you are interested in. Then when any of these hooks are triggered, your code will be called.</p> <p>We register hook handlers with the 'register_hook()' function. It takes 3 arguments. The first is the hook we wish to catch, the second is the filename of the file to find our handler function (relative to the base of your $Projectname installation), and the third is the function name of your handler function. So let's create our randplace_load() function right now. </p> <pre><code>function randplace_load() {\n    register_hook('post_local', 'addon/randplace/randplace.php', 'randplace_post_hook');\n\n    register_hook('feature_settings', 'addon/randplace/randplace.php', 'randplace_settings');\n    register_hook('feature_settings_post', 'addon/randplace/randplace.php', 'randplace_settings_post');\n\n}\n</code></pre> <p>So we're going to catch three events, 'post_local' which is triggered when a post is made on the local system, 'feature_settings' to set some preferences for our plugin, and 'feature_settings_post' to store those settings. </p> <p>Next we'll create an unload function. This is easy, as it just unregisters our hooks. It takes exactly the same arguments. </p> <pre><code>function randplace_unload() {\n    unregister_hook('post_local', 'addon/randplace/randplace.php', 'randplace_post_hook');\n\n    unregister_hook('feature_settings', 'addon/randplace/randplace.php', 'randplace_settings');\n    unregister_hook('feature_settings_post', 'addon/randplace/randplace.php', 'randplace_settings_post');\n\n}\n</code></pre> <p>Hooks are called with two arguments. The first is always $a, which is our global App structure and contains a huge amount of information about the state of the web request we are processing; as well as who the viewer is, and what our login state is, and the current contents of the web page we're probably constructing.</p> <p>The second argument is specific to the hook you're calling. It contains information relevant to that particular place in the program, and often allows you to look at, and even change it. In order to change it, you need to add '&amp;' to the variable name so it is passed to your function by reference. Otherwise it will create a copy and any changes you make will be lost when the hook process returns. Usually (but not always) the second argument is a named array of data structures. Please see the \"hook reference\" (not yet written as of this date) for details on any specific hook. Occasionally you may need to view the program source to see precisely how a given hook is called and how the results are processed. </p> <p>Let's go ahead and add some code to implement our post_local hook handler. </p> <pre><code>function randplace_post_hook($a, &amp;$item) {\n\n    /**\n     *\n     * An item was posted on the local system.\n     * We are going to look for specific items:\n     *      - A status post by a profile owner\n     *      - The profile owner must have allowed our plugin\n     *\n     */\n\n    logger('randplace invoked');\n\n    if(! local_channel())   /* non-zero if this is a logged in user of this system */\n        return;\n\n    if(local_channel() != $item['uid'])    /* Does this person own the post? */\n        return;\n\n    if(($item['parent']) || (! is_item_normal($item))) {\n        /* If the item has a parent, or isn't \"normal\", this is a comment or something else, not a status post. */\n        return;\n    }\n\n    /* Retrieve our personal config setting */\n\n    $active = get_pconfig(local_channel(), 'randplace', 'enable');\n\n    if(! $active)\n        return;\n    /**\n     *\n     * OK, we're allowed to do our stuff.\n     * Here's what we are going to do:\n     * load the list of timezone names, and use that to generate a list of world cities.\n     * Then we'll pick one of those at random and put it in the \"location\" field for the post.\n     *\n     */\n\n    $cities = array();\n    $zones = timezone_identifiers_list();\n    foreach($zones as $zone) {\n        if((strpos($zone,'/')) &amp;&amp; (! stristr($zone,'US/')) &amp;&amp; (! stristr($zone,'Etc/')))\n            $cities[] = str_replace('_', ' ',substr($zone,strpos($zone,'/') + 1));\n    }\n\n    if(! count($cities))\n        return;\n    $city = array_rand($cities,1);\n    $item['location'] = $cities[$city];\n\n    return;\n}\n</code></pre> <p>Now let's add our functions to create and store preference settings.</p> <pre><code>/**\n *\n * Callback from the settings post function.\n * $post contains the global $_POST array.\n * We will make sure we've got a valid user account \n * and that only our own submit button was clicked\n * and if so set our configuration setting for this person.\n *\n */\n\nfunction randplace_settings_post($a,$post) {\n    if(! local_channel())\n        return;\n    if($_POST['randplace-submit'])\n        set_pconfig(local_channel(),'randplace','enable',intval($_POST['randplace']));\n}\n\n\n\n/**\n *\n * Called from the Feature Setting form.\n * The second argument is a string in this case, the HTML content region of the page.\n * Add our own settings info to the string.\n *\n * For uniformity of settings pages, we use the following convention\n *     &lt;div class=\"settings-block\"&gt;\n *       &lt;h3&gt;title&lt;/h3&gt;\n *       .... settings html - many elements will be floated...\n *       &lt;div class=\"clear\"&gt;&lt;/div&gt; &lt;!-- generic class which clears all floats --&gt;\n *       &lt;input type=\"submit\" name=\"pluginnname-submit\" class=\"settings-submit\" ..... /&gt;\n *     &lt;/div&gt;\n */\n\n\n\nfunction randplace_settings(&amp;$a,&amp;$s) {\n\n    if(! local_channel())\n        return;\n\n    /* Add our stylesheet to the page so we can make our settings look nice */\n\n    head_add_css('/addon/randplace/randplace.css');\n\n    /* Get the current state of our config variable */\n\n    $enabled = get_pconfig(local_channel(),'randplace','enable');\n\n    $checked = (($enabled) ? ' checked=\"checked\" ' : '');\n\n    /* Add some HTML to the existing form */\n\n    $s .= '&lt;div class=\"settings-block\"&gt;';\n    $s .= '&lt;h3&gt;' . t('Randplace Settings') . '&lt;/h3&gt;';\n    $s .= '&lt;div id=\"randplace-enable-wrapper\"&gt;';\n    $s .= '&lt;label id=\"randplace-enable-label\" for=\"randplace-checkbox\"&gt;' . t('Enable Randplace Plugin') . '&lt;/label&gt;';\n    $s .= '&lt;input id=\"randplace-checkbox\" type=\"checkbox\" name=\"randplace\" value=\"1\" ' . $checked . '/&gt;';\n    $s .= '&lt;/div&gt;&lt;div class=\"clear\"&gt;&lt;/div&gt;';\n\n    /* provide a submit button */\n\n    $s .= '&lt;div class=\"settings-submit-wrapper\" &gt;&lt;input type=\"submit\" name=\"randplace-submit\" class=\"settings-submit\" value=\"' . t('Submit') . '\" /&gt;&lt;/div&gt;&lt;/div&gt;';\n\n}\n</code></pre> <p>Advanced Plugins</p> <p>Sometimes your plugins want to provide a range of new functionality which isn't provided at all or is clumsy to provide using hooks. In this case your plugin can also act as a 'module'. A module in our case refers to a structured webpage handler which responds to a given URL. Then anything which accesses that URL will be handled completely by your plugin.</p> <p>The key to this is to create a simple function named pluginname_module() which does nothing. </p> <pre><code>function randplace_module() { return; }\n</code></pre> <p>Once this function exists, the URL https://yoursite/randplace will access your plugin as a module. Then you can define functions which are called at various points to build a webpage just like the modules in the mod/ directory. The typical functions and the order which they are called is</p> <pre><code>modulename_init($a)    // (e.g. randplace_init($a);) called first - if you wish to emit json or xml, \n                       // you should do it here, followed by killme() which will avoid the default action of building a webpage\nmodulename_aside($a)   // Often used to create sidebar content\nmodulename_post($a)    // Called whenever the page is accessed via the \"post\" method\nmodulename_content($a) // called to generate the central page content. This function should return a string \n                       // consisting of the central page content.\n</code></pre> <p>Your module functions have access to the URL path as if they were standalone programs in the Unix operating system. For instance if you visit the page</p> <pre><code>https://yoursite/randplace/something/somewhere/whatever\n</code></pre> <p>we will create an argc/argv list for use by your module functions</p> <pre><code>$x = argc(); $x will be 4, the number of path arguments after the sitename\n\nfor($x = 0; $x &lt; argc(); $x ++)\n    echo $x . ' ' . argv($x);\n\n\n0 randplace\n1 something\n2 somewhere\n3 whatever\n</code></pre> <p>Porting Friendica Plugins</p> <p>$Projectname uses a similar plugin architecture to the Friendica project. The authentication, identity, and permissions systems are completely different. Many Friendica plugins can be ported reasonably easily by renaming a few functions - and then ensuring that the permissions model is adhered to. The functions which need to be renamed are:</p> <ul> <li> <p>Friendica's pluginname_install() is pluginname_load()</p> </li> <li> <p>Friendica's pluginname_uninstall() is pluginname_unload()</p> </li> </ul> <p>$Projectname has _install and _uninstall functions but these are used differently.</p> <ul> <li> <p>Friendica's \"plugin_settings\" hook is called \"feature_settings\"</p> </li> <li> <p>Friendica's \"plugin_settings_post\" hook is called \"feature_settings_post\"</p> </li> </ul> <p>Changing these will often allow your plugin to function, but please double check all your permission and identity code because the concepts behind it are completely different in $Projectname. Many structured data names (especially DB schema columns) are also quite different. </p>"},{"location":"Developers%20Guide/Plugins/#include-docmacrosmain_footerbb","title":"include doc/macros/main_footer.bb;","text":""},{"location":"Developers%20Guide/Schema-development/","title":"Red development - a guide to the schema system","text":"<p>A schema, in a nutshell, is a collection of settings for a bunch of variables to define certain elements of a theme.  A schema is loaded as though it were part of config.php and has access to all the same information.  Importantly, this means it is identity aware, and can be used to do some interesting things.  One could, for example, restrict options by service class, or present different options to different members.</p> <p>By default, we filter only by whether or not expert mode is enabled.  If expert mode is enabled, all options are presented to the member.  If it is not, only scheme, background image, font face, and iconset are available as choices.</p> <p>A schema is loaded after the member's personal settings.  Therefore, to allow a member to overwrite a particular aspect of a schema you would use the following syntax:</p> <pre><code>    if (! $foo)\n        $foo = 'bar';\n</code></pre> <p>However, there are circumstances - particularly with positional elements - where it may be desirable (or necessary) to override a member's settings.  In this case, the syntax is even simpler:</p> <pre><code>        $foo = 'bar';\n</code></pre> <p>Members will not thank you for this, however, so only use it when it is required.</p> <p>If no personal options are set, and no schema is selected, we will first try to load a schema with the file name \"default.php\".  This file should never be included with a theme.  If it is, merge conflicts will occur as people update their code.  Rather, this should be defined by administrators on a site by site basis. default.php and default.css MUST be symlinks to existing scheme files.</p> <p>You schema does not need to - and should not - contain all of these values.  Only the values that differ from the defaults should be listed.  This gives you some very powerful options with very few lines of code.</p> <p>Note the options available differ with each theme.  The options available with the Redbasic  theme are as follows:</p> <ul> <li>nav_colour     The colour of the navigation bar.  Options are red, black and silver.  Alternatively,      one can set $nav_bg_1, $nav_bg_2, $nav_bg_3 and $nav_bg_4 to provide gradient and     hover effects.</li> <li>banner_colour     The font colour of the banner element.  Accepts an RGB or Hex value.</li> <li>bgcolour     Set the body background colour.  Accepts an RGB or Hex value.</li> <li>background_image     Sets a background image.  Accepts a URL or path.</li> <li>item_colour     Set the background colour of items.  Accepts an RGB or Hex value.</li> <li>item_opacity     Set the opacity of items.  Accepts a value from 0.01 to 1</li> <li>toolicon_colour     Set the colour of tool icons.  Accepts an RGB or Hex value.</li> <li>toolicon_activecolour     Set the colour of active or hovered icon tools.</li> <li>font_size     Set the size of fonts in items and posts.  Accepts px or em.</li> <li>body_font_size     Sets the size of fonts at the body level.  Accepts px or em.</li> <li>font_colour     Sets the font colour.  Accepts an RGB or Hex value.</li> <li>radius     Set the radius of corners.  Accepts a numeral, and is always in px.</li> <li>shadow     Set the size of shadows shown with inline images.  Accepts a numerical      value.  Note shadows are not applied to smileys.</li> <li>converse_width     Set the maximum width of the content region in px.</li> <li>nav_min_opacity</li> <li>top_photo</li> <li>reply_photo</li> </ul> <p>If a your_schema_name.css file is found, the content of this file will be attached to the end of style.css. This gives the schem developer the possiblity to override any style component.</p>"},{"location":"Developers%20Guide/Schema-development/#include-docmacrosmain_footerbb","title":"include doc/macros/main_footer.bb;","text":""},{"location":"Developers%20Guide/Translations/","title":"Translating $Projectname","text":""},{"location":"Developers%20Guide/Translations/#translation-process","title":"Translation Process","text":"<p>The strings used in the UI of $Projectname is translated at Transifex and then included in the git repository at github. If you want to help with translation for any language, be it correcting terms or translating $Projectname to a currently not supported language, please register an account at transifex.com and contact the Redmatrix translation team there.</p> <p>Translating $Projectname is simple. Just use the online tool at transifex. If you don't want to deal with git &amp; co. that is fine, we check the status of the translations regularly and import them into the source tree at github so that others can use them.</p> <p>We do not include every translation from transifex in the source tree to avoid a scattered and disturbed overall experience. As an uneducated guess we have a lower limit of 50% translated strings before we include the language. This limit is judging only by the amount of translated strings under the assumption that the most prominent strings for the UI will be translated first by a translation team. If you feel your translation useable before this limit, please contact us and we will probably include your teams work in the source tree.</p> <p>If you want to get your work into the source tree yourself, feel free to do so and contact us with and question that arises. The process is simple and $Projectname ships with all the tools necessary.</p> <p>The location of the translated files in the source tree is     /view/LNG-CODE/ where LNG-CODE is the language code used, e.g. de for German or fr for French. For the email templates (the *.tpl files) just place them into the directory and you are done. The translated strings come as a \"hmessages.po\" file from transifex which needs to be translated into the PHP file $Projectname uses.  To do so, place the file in the directory mentioned above and use the \"po2php\" utility from the util directory of your $Projectname installation.</p> <p>Assuming you want to convert the German localization which is placed in view/de/hmessages.po you would do the following.</p> <ol> <li> <p>Navigate at the command prompt to the base directory of your    $Projectname installation</p> </li> <li> <p>Execute the po2php script, which will place the translation    in the hstrings.php file that is used by $Projectname.</p> <p>$&gt; php util/po2php.php view/de/hmessages.po</p> </li> </ol> <p>The output of the script will be placed at view/de/hstrings.php where    froemdoca os expecting it, so you can test your translation mmediately.</p> <ol> <li>Visit your $Projectname page to check if it still works in the language you    just translated. If not try to find the error, most likely PHP will give    you a hint in the log/warnings.about the error.</li> </ol> <p>For debugging you can also try to \"run\" the file with PHP. This should    not give any output if the file is ok but might give a hint for    searching the bug in the file.</p> <pre><code>   $&gt; php view/de/hstrings.php\n</code></pre> <ol> <li>commit the two files with a meaningful commit message to your git    repository, push it to your fork of the $Projectname repository at github and    issue a pull request for that commit.</li> </ol>"},{"location":"Developers%20Guide/Translations/#utilities","title":"Utilities","text":"<p>Additional to the po2php script there are some more utilities for translation in the \"util\" directory of the $Projectname source tree.  If you only want to translate $Projectname into another language you wont need any of these tools most likely but it gives you an idea how the translation process of $Projectname works.</p> <p>For further information see the utils/README file.</p>"},{"location":"Developers%20Guide/Translations/#known-problems","title":"Known Problems","text":"<ul> <li>$Projectname uses the language setting of the visitors browser to determain the   language for the UI. Most of the time this works, but there are some known   quirks.</li> <li>the early translations are based on the friendica translations, if you    some rough translations please let us know or fix them at Transifex.</li> </ul>"},{"location":"Developers%20Guide/Translations/#links","title":"Links","text":""},{"location":"Developers%20Guide/Translations/#include-docmacrosmain_footerbb","title":"include doc/macros/main_footer.bb;","text":""},{"location":"Developers%20Guide/Zot---A-High-Level-Overview/","title":"Zot - A High Level Overview","text":"<p>Here's a high level description of how zot works.</p> <p>In this example, \"Indigo\" is going to send a public message from his website at \"podunk.edu\". \"Nickordo\" is a recipient on another site (\"example.com\").</p> <p>Indigo first posts his message at podunk.edu. podunk.edu looks up who should receive the message and finds Nickordo. Nickordo usually posts from example.com so we add that destination to our list of recipients. We may also add other destinations for nickordo and anybody else that is following Indigo's posts.  </p> <p>In this example we find that we only have one known recipient at one known location. </p> <p>We send a packet to example.com:</p> <pre><code>{\n  \"type\":\"notify\",\n  \"sender\":{\n    \"guid\":\"kgVFf_1_SSbyqH-BNWjWuhAvJ2EhQBTUdw-Q1LwwssAntr8KTBgBSzNVzUm9_RwuDpxI6X8me_QQhZMf7RfjdA\",\n    \"guid_sig\":\"PT9-TApzpm7QtMxC63MjtdK2nUyxNI0tUoWlOYTFGke3kNdtxSzSvDV4uzq_7SSBtlrNnVMAFx2_1FDgyKawmqVtRPmT7QSXrKOL2oPzL8Hu_nnVVTs_0YOLQJJ0GYACOOK-R5874WuXLEept5-KYg0uShifsvhHnxnPIlDM9lWuZ1hSJTrk3NN9Ds6AKpyNRqf3DUdz81-Xvs8I2kj6y5vfFtm-FPKAqu77XP05r74vGaWbqb1r8zpWC7zxXakVVOHHC4plG6rLINjQzvdSFKCQb5R_xtGsPPfvuE24bv4fvN4ZG2ILvb6X4Dly37WW_HXBqBnUs24mngoTxFaPgNmz1nDQNYQu91-ekX4-BNaovjDx4tP379qIG3-NygHTjFoOMDVUvs-pOPi1kfaoMjmYF2mdZAmVYS2nNLWxbeUymkHXF8lT_iVsJSzyaRFJS1Iqn7zbvwH1iUBjD_pB9EmtNmnUraKrCU9eHES27xTwD-yaaH_GHNc1XwXNbhWJaPFAm35U8ki1Le4WbUVRluFx0qwVqlEF3ieGO84PMidrp51FPm83B_oGt80xpvf6P8Ht5WvVpytjMU8UG7-js8hAzWQeYiK05YTXk-78xg0AO6NoNe_RSRk05zYpF6KlA2yQ_My79rZBv9GFt4kUfIxNjd9OiV1wXdidO7Iaq_Q\",\n    \"url\":\"http:\\/\\/podunk.edu\",\n    \"url_sig\":\"T8Bp7j5DHHhQDCFcAHXfuhUfGk2P3inPbImwaXXF1xJd3TGgluoXyyKDx6WDm07x0hqbupoAoZB1qBP3_WfvWiJVAK4N1FD77EOYttUEHZ7L43xy5PCpojJQmkppGbPJc2jnTIc_F1vvGvw5fv8gBWZvPqTdb6LWF6FLrzwesZpi7j2rsioZ3wyUkqb5TDZaNNeWQrIEYXrEnWkRI_qTSOzx0dRTsGO6SpU1fPWuOOYMZG8Nh18nay0kLpxReuHCiCdxjXRVvk5k9rkcMbDBJcBovhiSioPKv_yJxcZVBATw3z3TTE95kGi4wxCEenxwhSpvouwa5b0hT7NS4Ay70QaxoKiLb3ZjhZaUUn4igCyZM0h6fllR5I6J_sAQxiMYD0v5ouIlb0u8YVMni93j3zlqMWdDUZ4WgTI7NNbo8ug9NQDHd92TPmSE1TytPTgya3tsFMzwyq0LZ0b-g-zSXWIES__jKQ7vAtIs9EwlPxqJXEDDniZ2AJ6biXRYgE2Kd6W_nmI7w31igwQTms3ecXe5ENI3ckEPUAq__llNnND7mxp5ZrdXzd5HHU9slXwDShYcW3yDeQLEwAVomTGSFpBrCX8W77n9hF3JClkWaeS4QcZ3xUtsSS81yLrp__ifFfQqx9_Be89WVyIOoF4oydr08EkZ8zwlAsbZLG7eLXY\"\n  },\n  \"callback\":\"\\/post\",\n  \"version\":1,\n  \"secret\":\"1eaa6613699be6ebb2adcefa5379c61a3678aa0df89025470fac871431b70467\"\n}\n</code></pre> <p>This packet says the following:</p> <p>I'm Indigo and here is proof. I'm posting from podunk.edu and here is proof. I've got a package for you. The tracking number is \"1eaa6613....\". </p> <p>Example.com accepts this packet and says \"whoa, hold on - I don't know you. I want to prove who you are.\" So Example.com connects to podunk.edu through a \"well-known URL\" that we use for this purpose and looks up the \"guid\" mentioned above. It should return a bunch of information, one item of which is a public key. Example.com uses this key to verify the signatures in the message to verify that indeed there is a person named Indigo at podunk.edu. We only need to do this once. (Note that Indigo can post from any location. All we have to do is prove that it's Indigo and that Indigo can prove that he's posting from another site.)</p> <p>Then example.com disconnects and flags that there's a message waiting at podunk.edu. Either immediately, or whenever the urge hits (depending on how important Indigo is to anybody on this site), example.com \"calls\" podunk.edu. It says something like this:</p> <pre><code>{\n  \"type\":\"pickup\",\n  \"url\":\"http:\\/\\/example.com\",\n  \"callback_sig\":\"teE1_fLIqfyeCuZY4iS7sNU8jUlUuqYOYBiHLarkC99I9K-uSr8DAwVW8ZPZRK-uYdxRMuKFb6cumF_Gt9XjecCPBM8HkoXHOi_VselzJkxPwor4ZPtWYWWaFtRfcAm794LrWjdz62zdESTQd2JJIZWbrli1sUhK801BF3n0Ye6-X1MWhy9EUTVlNimOeRipcuD_srMhUcAXOEbLlrugZ8ovy2YBe6YOXkS8jj0RSFjsOduXAoVhQmNpcobSYsDvaQS3e3MvE6-oXE602zGQhuNLr7DIMt9PCdAeQo-ZM-DHlZGCkGk4O2oQFCXFzGPqLUMWDACGJfTfIWGoh_EJqT_SD5b_Yi_Wk9S1lj7vb-lmxe5JuIf7ezWzHoBT8vswnZxPYlidH2i9wapdzij9il_qqcCWWHIp7q_XkY_Zj52Z4r4gdmiqM-8y1c_1SDX7hrJFRwqL_PKFbEvyi5nMWTEzqp55Tay5Woiv19STK_H_8ufFfD9AOkYnk6rIOMsk9dn3a5tAFpDRyRndXkBWAXwiJjiND2zjue7BFu7Ty40THXcfYRh1a5XrAXcaGeYuagg-8J9tAufu9_LY3qGazFg8kRBVMOn4M8DRKSIhKj7z4MnbYL0s09gREojy4jqWO3VkaOjP2jUGzoPuUDLasudE1ehWFq0K_MTQNavgmp8\",\n  \"callback\":\"http:\\/\\/example.com\\/post\",\n  \"secret\":\"1eaa6613699be6ebb2adcefa5379c61a3678aa0df89025470fac871431b70467\",\n  \"secret_sig\":\"O7nB4_UJHBXi28Suwl9LBZF9hI_9KGVTgehnUlWF1oYMNRnBbVHB9lzUfAoalvp3STbU3xJbtD_S58tv6MfV7J5j2V_S1W5ex3dulmDGB8Pt_7Fe5mbEPmjQFcfv3Eg5dUjYIuDl0TDScfrHyImj7RZIWHbwd7wWVoMzzDa_o33klpYmKZCBvObCh55bRrlFkXZs_dRuOiPwkfX0C6_XES4OyOIYl45V30rdhmf-STrf4L9dKYy_axQ12RIwRcKychvVLwlUJn3bn9lgNXRRU_HTne-09OPcJbUOdcD3DkFoKOxMULBNKPHzsCau0ICYug7S0EP6LpCom_mW78s08LyVA1vYeFZjevBCiGecj57yIAQDYi6_rpWJfihYaWHRN0oqtScUR4Bdf0bQbEHxMs4zAtrOAxfyJCbi6U1pfnGgzXzB9ulOYGnVGNTF7Ey4K7FOZIBtk0ILY2JfvBUaVvVs8ttagOOHmhWhnbCvrnOFlkNdlce7zoJCSUJENUOCYmTRfwB_Jno5fAzRnrsYU3_Z-l1mzniU_OmUPz8mPEh7PwhkqAiVlyaM-q15gn7l2lAIDk9kp2X_iCme7v4V0ADN_DbpaI_0-6mPw5HLbKrCsA-sxlSMB4DO4lDCHYkauj0l25sbfroRWB_hax1O4Q0oWyOlVJLUqEC5nuUJCCE\"\n}\n</code></pre> <p>What this message says is: This is example.com, I have proof, and I'm here to pick up a package. Here's the tracking number, and here's proof that this is the tracking number you presumably sent to example.com.</p> <p>Good enough. Podunk.edu checks out the story and indeed, it is example.com, and yes, there's a package waiting with that tracking number. Here's the package...</p> <pre><code>{\n  \"success\":1,\n  \"pickup\":{\n    \"notify\":{\n      \"type\":\"notify\",\n      \"sender\":{\n        \"guid\":\"kgVFf_1_SSbyqH-BNWjWuhAvJ2EhQBTUdw-Q1LwwssAntr8KTBgBSzNVzUm9_RwuDpxI6X8me_QQhZMf7RfjdA\",\n        \"guid_sig\":\"PT9-TApzpm7QtMxC63MjtdK2nUyxNI0tUoWlOYTFGke3kNdtxSzSvDV4uzq_7SSBtlrNnVMAFx2_1FDgyKawmqVtRPmT7QSXrKOL2oPzL8Hu_nnVVTs_0YOLQJJ0GYACOOK-R5874WuXLEept5-KYg0uShifsvhHnxnPIlDM9lWuZ1hSJTrk3NN9Ds6AKpyNRqf3DUdz81-Xvs8I2kj6y5vfFtm-FPKAqu77XP05r74vGaWbqb1r8zpWC7zxXakVVOHHC4plG6rLINjQzvdSFKCQb5R_xtGsPPfvuE24bv4fvN4ZG2ILvb6X4Dly37WW_HXBqBnUs24mngoTxFaPgNmz1nDQNYQu91-ekX4-BNaovjDx4tP379qIG3-NygHTjFoOMDVUvs-pOPi1kfaoMjmYF2mdZAmVYS2nNLWxbeUymkHXF8lT_iVsJSzyaRFJS1Iqn7zbvwH1iUBjD_pB9EmtNmnUraKrCU9eHES27xTwD-yaaH_GHNc1XwXNbhWJaPFAm35U8ki1Le4WbUVRluFx0qwVqlEF3ieGO84PMidrp51FPm83B_oGt80xpvf6P8Ht5WvVpytjMU8UG7-js8hAzWQeYiK05YTXk-78xg0AO6NoNe_RSRk05zYpF6KlA2yQ_My79rZBv9GFt4kUfIxNjd9OiV1wXdidO7Iaq_Q\",\n        \"url\":\"http:\\/\\/z.podunk.edu\",\n        \"url_sig\":\"T8Bp7j5DHHhQDCFcAHXfuhUfGk2P3inPbImwaXXF1xJd3TGgluoXyyKDx6WDm07x0hqbupoAoZB1qBP3_WfvWiJVAK4N1FD77EOYttUEHZ7L43xy5PCpojJQmkppGbPJc2jnTIc_F1vvGvw5fv8gBWZvPqTdb6LWF6FLrzwesZpi7j2rsioZ3wyUkqb5TDZaNNeWQrIEYXrEnWkRI_qTSOzx0dRTsGO6SpU1fPWuOOYMZG8Nh18nay0kLpxReuHCiCdxjXRVvk5k9rkcMbDBJcBovhiSioPKv_yJxcZVBATw3z3TTE95kGi4wxCEenxwhSpvouwa5b0hT7NS4Ay70QaxoKiLb3ZjhZaUUn4igCyZM0h6fllR5I6J_sAQxiMYD0v5ouIlb0u8YVMni93j3zlqMWdDUZ4WgTI7NNbo8ug9NQDHd92TPmSE1TytPTgya3tsFMzwyq0LZ0b-g-zSXWIES__jKQ7vAtIs9EwlPxqJXEDDniZ2AJ6biXRYgE2Kd6W_nmI7w31igwQTms3ecXe5ENI3ckEPUAq__llNnND7mxp5ZrdXzd5HHU9slXwDShYcW3yDeQLEwAVomTGSFpBrCX8W77n9hF3JClkWaeS4QcZ3xUtsSS81yLrp__ifFfQqx9_Be89WVyIOoF4oydr08EkZ8zwlAsbZLG7eLXY\"\n      },\n      \"callback\":\"\\/post\",\n      \"version\":1,\n      \"secret\":\"1eaa6613699be6ebb2adcefa5379c61a3678aa0df89025470fac871431b70467\"\n    },\n    \"message\":{\n      \"message_id\":\"10b049ce384cbb2da9467319bc98169ab36290b8bbb403aa0c0accd9cb072e76@podunk.edu\",\n      \"message_top\":\"10b049ce384cbb2da9467319bc98169ab36290b8bbb403aa0c0accd9cb072e76@podunk.edu\",\n      \"message_parent\":\"10b049ce384cbb2da9467319bc98169ab36290b8bbb403aa0c0accd9cb072e76@podunk.edu\",\n      \"created\":\"2012-11-20 04:04:16\",\n      \"edited\":\"2012-11-20 04:04:16\",\n      \"title\":\"\",\n      \"body\":\"Hi Nickordo\",\n      \"app\":\"\",\n      \"verb\":\"post\",\n      \"object_type\":\"\",\n      \"target_type\":\"\",\n      \"permalink\":\"\",\n      \"location\":\"\",\n      \"longlat\":\"\",\n      \"owner\":{\n        \"name\":\"Indigo\",\n        \"address\":\"indigo@podunk.edu\",\n        \"url\":\"http:\\/\\/podunk.edu\",\n        \"photo\":{\n          \"mimetype\":\"image\\/jpeg\",\n          \"src\":\"http:\\/\\/podunk.edu\\/photo\\/profile\\/m\\/5\"\n        },\n        \"guid\":\"kgVFf_1_SSbyqH-BNWjWuhAvJ2EhQBTUdw-Q1LwwssAntr8KTBgBSzNVzUm9_RwuDpxI6X8me_QQhZMf7RfjdA\",\n        \"guid_sig\":\"PT9-TApzpm7QtMxC63MjtdK2nUyxNI0tUoWlOYTFGke3kNdtxSzSvDV4uzq_7SSBtlrNnVMAFx2_1FDgyKawmqVtRPmT7QSXrKOL2oPzL8Hu_nnVVTs_0YOLQJJ0GYACOOK-R5874WuXLEept5-KYg0uShifsvhHnxnPIlDM9lWuZ1hSJTrk3NN9Ds6AKpyNRqf3DUdz81-Xvs8I2kj6y5vfFtm-FPKAqu77XP05r74vGaWbqb1r8zpWC7zxXakVVOHHC4plG6rLINjQzvdSFKCQb5R_xtGsPPfvuE24bv4fvN4ZG2ILvb6X4Dly37WW_HXBqBnUs24mngoTxFaPgNmz1nDQNYQu91-ekX4-BNaovjDx4tP379qIG3-NygHTjFoOMDVUvs-pOPi1kfaoMjmYF2mdZAmVYS2nNLWxbeUymkHXF8lT_iVsJSzyaRFJS1Iqn7zbvwH1iUBjD_pB9EmtNmnUraKrCU9eHES27xTwD-yaaH_GHNc1XwXNbhWJaPFAm35U8ki1Le4WbUVRluFx0qwVqlEF3ieGO84PMidrp51FPm83B_oGt80xpvf6P8Ht5WvVpytjMU8UG7-js8hAzWQeYiK05YTXk-78xg0AO6NoNe_RSRk05zYpF6KlA2yQ_My79rZBv9GFt4kUfIxNjd9OiV1wXdidO7Iaq_Q\"\n      },\n      \"author\":{\n        \"name\":\"Indigo\",\n        \"address\":\"indigo@podunk.edu\",\n        \"url\":\"http:\\/\\/podunk.edu\",\n        \"photo\":{\n          \"mimetype\":\"image\\/jpeg\",\n          \"src\":\"http:\\/\\/podunk.edu\\/photo\\/profile\\/m\\/5\"\n        },\n        \"guid\":\"kgVFf_1_SSbyqH-BNWjWuhAvJ2EhQBTUdw-Q1LwwssAntr8KTBgBSzNVzUm9_RwuDpxI6X8me_QQhZMf7RfjdA\",\n        \"guid_sig\":\"PT9-TApzpm7QtMxC63MjtdK2nUyxNI0tUoWlOYTFGke3kNdtxSzSvDV4uzq_7SSBtlrNnVMAFx2_1FDgyKawmqVtRPmT7QSXrKOL2oPzL8Hu_nnVVTs_0YOLQJJ0GYACOOK-R5874WuXLEept5-KYg0uShifsvhHnxnPIlDM9lWuZ1hSJTrk3NN9Ds6AKpyNRqf3DUdz81-Xvs8I2kj6y5vfFtm-FPKAqu77XP05r74vGaWbqb1r8zpWC7zxXakVVOHHC4plG6rLINjQzvdSFKCQb5R_xtGsPPfvuE24bv4fvN4ZG2ILvb6X4Dly37WW_HXBqBnUs24mngoTxFaPgNmz1nDQNYQu91-ekX4-BNaovjDx4tP379qIG3-NygHTjFoOMDVUvs-pOPi1kfaoMjmYF2mdZAmVYS2nNLWxbeUymkHXF8lT_iVsJSzyaRFJS1Iqn7zbvwH1iUBjD_pB9EmtNmnUraKrCU9eHES27xTwD-yaaH_GHNc1XwXNbhWJaPFAm35U8ki1Le4WbUVRluFx0qwVqlEF3ieGO84PMidrp51FPm83B_oGt80xpvf6P8Ht5WvVpytjMU8UG7-js8hAzWQeYiK05YTXk-78xg0AO6NoNe_RSRk05zYpF6KlA2yQ_My79rZBv9GFt4kUfIxNjd9OiV1wXdidO7Iaq_Q\"\n      }\n    }\n  }\n}\n</code></pre> <p>And that's the package (the original message). Example.com converts this into a form suitable for viewing by Nickordo and notifies Nickordo that there's a new message. Podunk.edu might discover that there are other packages waiting for example.com. If this happens it may also send any and all other waiting packages at this time. Each has the original tracking number attached.  </p>"},{"location":"Developers%20Guide/Zot---A-High-Level-Overview/#include-docmacrosmain_footerbb","title":"include doc/macros/main_footer.bb;","text":""},{"location":"Developers%20Guide/filesync/","title":"File Sync and Clone","text":"<p>File cloning across multiple instances of a channel is a very hard problem, due to the nature of PHP memory allocation. This needs to be handled dramatically differently than cloning or syncing of other information. (Processing one large video file or 40-50 photos could exhaust memory). Therefore we can't easily just dump all the data to a dump file and sequentially process it. Loading the dump file itself is likely to exhaust memory.</p> <p>There are also two primary operations we are considering. The first is the hardest - saving and then importing all your channel information into a new channel clone. The second is synchronising file changes as they occur across two or more \"active\" clones.</p> <p>For the first cut at this tool we will concentrate on the second case, while trying to maintain some measure of compatibility with the first case so that we can re-use the same tools.</p>"},{"location":"Developers%20Guide/filesync/#meta-data","title":"Meta Data","text":"<p>First we need the metadata for the file in order to precisely re-construct its structure on another site. This requires the following information:</p> <p>'attach' structure (without file contents - which is the default) for the file itself and its parent directories so that we can re-create its precise place in the file system, since we do not know if the parent directory has been imported previously or ever. </p> <p>'photo' structure for any photo elements which were created as a result of uploading this file into the system. This typically contains several different 'scales' or thumbnail images, some of which may be cropped for profile photo use or cover photo use. We need to retain the cropping information which is not present in the metadata, but only in the stored data. The actual thumbnail image data may or may not be included in the metadata. A cover photo of large scale (scale #7) could potentially cause memory issues. Not as bad as a 100M video, but if you have several of these they could add up.  </p> <p>'item' entries which are linked to this file. These can be file share activities, the \"parent item\" linked to photos, and any attached conversation items (photo likes, comments, etc.) </p> <p>All of these items will require URL replacement and re-signing of the item as they are relocated to another site.</p>"},{"location":"Developers%20Guide/filesync/#file-data","title":"File Data","text":"<p>Then we have the actual file data we need to reconstruct the file. This needs to be stored separately from the meta-data to avoid memory exhaustion when processing. The actual file data can be used to reconstruct the attach structure and the first four photo scales. If this is a photo, we need access to the \"#4 scale\" (profile photo) and the #7 scale (cover photo) as they were originally cropped. All other thumbnails can be generated from these. </p>"},{"location":"Developers%20Guide/filesync/#file-sync","title":"File Sync","text":"<p>We will consider this operation first because it is probably the most straightforward to implement. When a photo is added to or removed or changed from the source system, we will send a clone sync packet to all known clones containing the metadata - but no file data . We can only send one sync packet per file operation that needs to be synced. </p> <p>The receiving end will create and perform URL translation on all the metadata structures and store them. Then it will need to fetch the actual data. Assuming CURL supports streaming, an authenticated request is sent to the original site and the original file is requested and streamed directly to disk (bypassing all processing). If photo scale #4 or scale #7 is required, these are requested and stored into their respective structures. We're assuming in this case that the cover photo large scale will not exhaust memory. If CURL cannot be made to support streaming, request packets need to be queued and sent to the origination site to obtain \"chunks\" of the file and re-assembled once all chunks have been retrieved.</p> <p>The authenticated request depends on the mechanism. For CURL streaming, some signed secret with a timestamp will probably need to be generated and posted to the file origination site. Then the data can be retrieved with minimal internal processing and dumped directly to disk using stdio buffering. In the case of a zot request, the zot request packet will be validated, however scheduling chunk batches and re-assembling them could be tricky.</p>"},{"location":"Developers%20Guide/filesync/#file-backuprestore","title":"File Backup/Restore","text":"<p>This is much more complicated as we do not have an authenticate web server to request data from. The metadata can be mostly the same, but we need some form of signalling that we will not be fetching the file via the web. This will likely require a client side process to parse each metadata file and locate a file on disk which it is associated with. Then the data would need to be streamed to the destination server with a special endpoint designed for this task. A java app might be the best option here to retain platform neutrality.</p> <p>Another option would be to use WebDAV for this step. The metadata files would be uploaded first, and then the data files. If a data file corresponded to an existing metadata file, the metadata would be processed; the file stored appropriately, and the metadata file then removed. In this case, photos of scales 4 and 7 would need to be provided in the metadata.  </p> <p>Optionally, this step could also be performed with a filesystem local to the destination server. This would be the highest performance, and a suite of shell-based tools (in the case of Linux) could perform the \"client-side\" of the task.</p> <p>The complexity of this task mandates careful planning into how the data is organised and stored and if necessary backed up remotely or transmitted for backup by the source website.</p>"},{"location":"Developers%20Guide/filesync/#backward-compatibility","title":"Backward Compatibility","text":"<p>There are some obvious issues with making data available for backup or cloning which existed on the system prior to the existence of restore/sync tools. To keep the tools themselves relatively uncomplicated (to the extent possible given the constraints) backward compatibility may have to be preformed by dedicated plugin or addon.        </p>"},{"location":"Member%20Guide/Features/","title":"Extra Features","text":"<p>The default interface of $Projectname was designed to be uncluttered. There are a huge number of extra features (some of which are extremely useful) which you can turn on and get the most of the application. These are found under the Extra Features link of your Settings page.</p> <p>Content Expiration </p> <p>Remove posts/comments and/or private messages at a future time. An extra button is added to the post editor which asks you for an expiration. Typically this in \"yyyy-mm-dd hh:mm\" format, but in the English language you have a bit more freedom and can use most any recognisable date reference such as \"next Thursday\" or \"+1 day\". At the specified time (give or take approximately ten minutes based on the remote system's checking frequency) the post is removed. </p> <p>Multiple Profiles</p> <p>The ability to create multiple profiles which are visible only to specific persons or groups. Your default profile may be visible to anybody, but secondary profiles can all contain different or additional information and can only be seen by those to whom that profile is assigned.</p> <p>Web Pages</p> <p>Provides the ability to use web page design feaures and create custom webpages from your own content and also to design the pages with page layouts, custom menus, and content blocks.</p> <p>Private Notes</p> <p>On pages where it is available (your matrix page and personal web pages) provide a \"widget\" to create and store personal reminders and notes. </p> <p>Enhanced Photo Albums</p> <p>Provides a photo album viewer that is a bit prettier than the normal interface.</p> <p>Extended Identity Sharing</p> <p>By default your identity travels with you as you browse the matrix to remote sites - and they know who you are and can show you content that only you can see. With Extended Identity Sharing you can provide this information to any website you visit from within the matrix. </p> <p>Expert Mode</p> <p>This allows you to see some advanced configuration options that would confuse some people or cause support issues. In particular this can give you full control over theme features and colours - so that you can tweak a large number of settings of the display theme to your liking. </p> <p>Premium Channel</p> <p>This allows you to set restrictions and terms on those that connect with your channel. This may be used by celebrities or anybody else who wishes to describe their channel to people who wish to connect with it. In certain cases you may be asked for payment in order to connect.  </p> <p>Richtext Editor</p> <p>The status post editor is plaintext, but the matrix allows a wide range of markup using BBcode. The visual editor provides \"what you see is what you get\" for many of the most frequently used markup tags. </p> <p>Post Preview</p> <p>Allows previewing posts and comments exactly as they would look on the page before publishing them.</p> <p>Channel Sources</p> <p>Automatically import and re-publish channel content from other channels or feeds. This allows you to create sub-channels and super-channels from content provided elsewhere. The rules are that the content must be public, and the channel owner must give you permission to source their channel.</p> <p>Even More Encryption</p> <p>Private messages are encrypted during transport and storage. In this day and age, this encyption may not be enough if your communications are extremely sensitive. This options lets you provide optional encryption of content \"end-to-end\" with a shared secret key. How the recipient learns the secret key is completely up to you. You can provide a hint such as \"the name of aunt Claire's first dog\". </p> <p>Search by Date</p> <p>This provides the ability to select posts by date ranges</p> <p>Privacy Group Filter</p> <p>Enable widget to display stream posts only from selected groups of connection. This also toggles the outbound permissions while you are viewing a privacy group. This is analogous to Google \"circles\" or Disapora \"aspects\". </p> <p>Saved Searches</p> <p>Provides a search widget on your matrix page which can save selected search terms for re-use.</p> <p>Personal Tab</p> <p>Enable tab to display only matrix posts that you've interacted with in some way, as an author or a contributor to the conversation.</p> <p>New Tab</p> <p>Enables a tab to display all new matrix activity as a firehose or timeline.</p> <p>Affinity Tool</p> <p>Filter matrix stream activity by the depth of your relationships</p> <p>Edit Sent Posts</p> <p>Edit and correct posts and comments after sending</p> <p>Tagging</p> <p>Ability to tag existing posts, including those written by others.</p> <p>Post Categories</p> <p>Add categories to your channel posts</p> <p>Saved Folders</p> <p>Ability to file posts under folders or tags for later recall</p> <p>Dislike Posts</p> <p>Ability to dislike posts/comments</p> <p>Star Posts</p> <p>Ability to mark special posts with a star indicator</p> <p>Tag Cloud</p> <p>Provide a personal tag cloud on your channel page</p>"},{"location":"Member%20Guide/Features/#include-docmacrosmain_footerbb","title":"include doc/macros/main_footer.bb;","text":""}]}